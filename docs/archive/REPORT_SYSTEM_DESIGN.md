# æŠ¥å‘Šç³»ç»ŸæŠ€æœ¯è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°

DeFiæ”¶ç›Šæ± èšåˆç³»ç»Ÿçš„æŠ¥å‘Šç³»ç»Ÿé‡‡ç”¨åŒæ ¼å¼æ”¯æŒç­–ç•¥ï¼Œä¸ºç”¨æˆ·æä¾›æœ€ä¼˜çš„é˜…è¯»å’Œäº¤äº’ä½“éªŒã€‚

## è®¾è®¡åŸåˆ™

### ç”¨æˆ·ä½“éªŒä¼˜å…ˆ
- **è°ƒç ”æŠ¥å‘Š**ï¼šä¼˜åŒ–çš„Markdowné˜…è¯»ä½“éªŒï¼Œæ”¯æŒè¡¨æ ¼ç­‰å¯Œæ–‡æœ¬æ ¼å¼
- **åˆ†ææŠ¥å‘Š**ï¼šä¸€é”®ç›´è¾¾å®Œæ•´äº¤äº’å¼HTMLæŠ¥å‘Šï¼Œæ— ä¸­é—´é¡µé¢

### æŠ€æœ¯å®ç°ç®€æ´
- **ç›´æ¥æ–‡ä»¶æœåŠ¡**ï¼šå‡å°‘ä¸å¿…è¦çš„æ•°æ®å¤„ç†å’Œè½¬æ¢
- **åŸç”ŸåŠŸèƒ½ä¿ç•™**ï¼šå®Œæ•´ä¿æŒHTMLæ–‡ä»¶çš„JavaScriptäº¤äº’èƒ½åŠ›

## æ–‡ä»¶æ ¼å¼å¤„ç†

### Markdownæ–‡ä»¶ï¼ˆè°ƒç ”æŠ¥å‘Šï¼‰

**æŠ€æœ¯æ ˆ**
- `remark` - Markdownè§£æå™¨
- `remark-gfm` - GitHubé£æ ¼Markdownæ”¯æŒï¼ˆè¡¨æ ¼ï¼‰
- `remark-html` - HTMLè¾“å‡º
- `gray-matter` - Frontmatterè§£æ

**å¤„ç†æµç¨‹**
```typescript
// 1. æ–‡ä»¶è¯»å–å’ŒFrontmatterè§£æ
const { data, content: markdownContent } = matter(fileContent);

// 2. Markdownè½¬HTMLå¤„ç†ç®¡é“
const processedContent = await remark()
  .use(remarkGfm)  // å¯ç”¨è¡¨æ ¼æ”¯æŒ
  .use(html, { sanitize: false })
  .process(markdownContent);
```

**æ ·å¼ä¼˜åŒ–**
```css
/* è¡¨æ ¼æ¸²æŸ“æ ·å¼ */
.prose table {
  @apply w-full border-collapse border border-gray-300 my-6;
}
.prose table thead {
  @apply bg-gray-50;
}
.prose table th {
  @apply border border-gray-300 px-4 py-3 text-left font-semibold text-gray-900;
}
.prose table td {
  @apply border border-gray-300 px-4 py-3 text-gray-800;
}
```

### HTMLæ–‡ä»¶ï¼ˆåˆ†ææŠ¥å‘Šï¼‰

**ç›´æ¥è·³è½¬è®¾è®¡**
- **æ— ä¸­é—´é¡µé¢**ï¼šç”¨æˆ·ç‚¹å‡»ç›´æ¥æ‰“å¼€å®Œæ•´æŠ¥å‘Š
- **å®Œæ•´åŠŸèƒ½ä¿ç•™**ï¼šChart.jså›¾è¡¨ã€åŠ¨ç”»ã€äº¤äº’å¡ç‰‡
- **æ–°çª—å£ç‹¬ç«‹è¿è¡Œ**ï¼šé¿å…ä¸ä¸»åº”ç”¨å†²çª

**æŠ€æœ¯å®ç°**
```typescript
// PoolTable.tsx - åˆ†ææŠ¥å‘ŠæŒ‰é’®
onClick={() => {
  const slug = pool.reports.analysis?.url?.split('/').pop();
  if (slug) {
    window.open(`/api/reports/analysis/${slug}/raw`, '_blank');
  }
}}

// APIç«¯ç‚¹ - ç›´æ¥æœåŠ¡åŸå§‹HTML
export async function GET(request: NextRequest, { params }: { params: { slug: string } }) {
  const content = fs.readFileSync(htmlFilePath, 'utf8');
  
  return new NextResponse(content, {
    headers: {
      'Content-Type': 'text/html; charset=utf-8',
      'Cache-Control': 'public, max-age=3600',
    },
  });
}
```

## APIè®¾è®¡

### ç«¯ç‚¹ç»“æ„
```
# ç»Ÿä¸€çš„ç”¨æˆ·è®¿é—®URL
/reports/research/[slug]          # è°ƒç ”æŠ¥å‘Šé¡µé¢ï¼ˆMarkdownæ¸²æŸ“ï¼‰
/reports/analysis/[slug]          # åˆ†ææŠ¥å‘Šé¡µé¢ï¼ˆç›´æ¥HTMLæœåŠ¡ï¼‰

# åç«¯APIç«¯ç‚¹ï¼ˆç”¨äºæ•°æ®è·å–ï¼‰
/api/reports/research/[slug]      # è°ƒç ”æŠ¥å‘ŠAPIï¼ˆè¿”å›JSONï¼‰
/api/reports/analysis/[slug]      # åˆ†ææŠ¥å‘ŠAPIï¼ˆè¿”å›JSONï¼‰
```

### ç»Ÿä¸€æ–‡ä»¶ç»“æ„
```typescript
// æ‰€æœ‰æŠ¥å‘Šæ–‡ä»¶ç»Ÿä¸€å­˜å‚¨åœ¨researchç›®å½•
web3/protocol/research/
â”œâ”€â”€ [slug].md      # è°ƒç ”æŠ¥å‘Šï¼ˆMarkdownæ ¼å¼ï¼‰
â””â”€â”€ [slug].html    # åˆ†ææŠ¥å‘Šï¼ˆHTMLæ ¼å¼ï¼‰

// æ–‡ä»¶æŸ¥æ‰¾é¡ºåº
- åˆ†ææŠ¥å‘Šï¼šä¼˜å…ˆHTMLæ ¼å¼ï¼Œå¤‡ç”¨Markdownæ ¼å¼
- è°ƒç ”æŠ¥å‘Šï¼šä»…Markdownæ ¼å¼
```

## ç”¨æˆ·äº¤äº’æµç¨‹

### è°ƒç ”æŠ¥å‘Šæµç¨‹
```
ç”¨æˆ·ç‚¹å‡»"æŸ¥çœ‹æŠ¥å‘Š" â†’ æ‰“å¼€æŠ¥å‘Šé¡µé¢ â†’ æœåŠ¡å™¨å¤„ç†Markdown â†’ æ¸²æŸ“HTMLé¡µé¢ â†’ æ˜¾ç¤ºæ ¼å¼åŒ–å†…å®¹
```

### åˆ†ææŠ¥å‘Šæµç¨‹
```
ç”¨æˆ·ç‚¹å‡»"æŸ¥çœ‹åˆ†æ" â†’ æ‰“å¼€ç»Ÿä¸€URL(/reports/analysis/[slug]) â†’ ç›´æ¥è¿”å›å®Œæ•´äº¤äº’å¼HTMLï¼ˆæ— é‡å®šå‘ï¼‰
```

## æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜ç­–ç•¥
- **é™æ€æ–‡ä»¶ç¼“å­˜**ï¼š1å°æ—¶HTTPç¼“å­˜
- **APIå“åº”ç¼“å­˜**ï¼šå‡å°‘é‡å¤æ–‡ä»¶è¯»å–
- **å®¢æˆ·ç«¯ç¼“å­˜**ï¼šæµè§ˆå™¨æ ‡å‡†ç¼“å­˜æœºåˆ¶

### å“åº”æ—¶é—´ç›®æ ‡
- **HTMLæ–‡ä»¶æœåŠ¡**ï¼š<100ms
- **Markdownå¤„ç†**ï¼š<200ms
- **é¦–å±æ¸²æŸ“**ï¼š<2ç§’

## å®‰å…¨è€ƒè™‘

### æ–‡ä»¶è®¿é—®å®‰å…¨
- **è·¯å¾„éªŒè¯**ï¼šé˜²æ­¢ç›®å½•éå†æ”»å‡»
- **æ–‡ä»¶ç±»å‹æ£€æŸ¥**ï¼šä»…å…è®¸.mdå’Œ.htmlæ–‡ä»¶
- **å†…å®¹å®‰å…¨**ï¼šHTMLæ–‡ä»¶é€šè¿‡å¯ä¿¡æºç®¡ç†

### åŒæºç­–ç•¥
- **APIç«¯ç‚¹æœåŠ¡**ï¼šç¬¦åˆæµè§ˆå™¨åŒæºç­–ç•¥
- **æ–°çª—å£éš”ç¦»**ï¼šé¿å…è·¨åŸŸå®‰å…¨é—®é¢˜
- **CSPå…¼å®¹**ï¼šä¸å†…å®¹å®‰å…¨ç­–ç•¥å…¼å®¹

## æ‰©å±•æ€§è®¾è®¡

### å¤šæ ¼å¼æ”¯æŒ
- å½“å‰ï¼šMarkdown + HTML
- æœªæ¥å¯æ‰©å±•ï¼šPDFã€å›¾ç‰‡ã€è§†é¢‘ç­‰

### åŠ¨æ€å†…å®¹æ”¯æŒ
- å½“å‰ï¼šé™æ€æ–‡ä»¶æœåŠ¡
- æœªæ¥å¯æ‰©å±•ï¼šæ•°æ®åº“å­˜å‚¨ã€åŠ¨æ€ç”Ÿæˆ

### å›½é™…åŒ–æ”¯æŒ
- æ–‡ä»¶å‘½åæ”¯æŒï¼š[slug]_[lang].md
- å¤šè¯­è¨€è·¯ç”±ï¼š/reports/[lang]/research/[slug]

## ç»´æŠ¤å’Œç›‘æ§

### é”™è¯¯å¤„ç†
- **404å¤„ç†**ï¼šå‹å¥½çš„æ–‡ä»¶æœªæ‰¾åˆ°æç¤º
- **500å¤„ç†**ï¼šæœåŠ¡å™¨é”™è¯¯æ¢å¤æœºåˆ¶
- **æ—¥å¿—è®°å½•**ï¼šè®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—

### æ€§èƒ½ç›‘æ§
- **å“åº”æ—¶é—´ç›‘æ§**ï¼šAPIå“åº”æ—¶é—´ç»Ÿè®¡
- **é”™è¯¯ç‡ç›‘æ§**ï¼š404å’Œ500é”™è¯¯ç‡è·Ÿè¸ª
- **ç”¨æˆ·è¡Œä¸ºåˆ†æ**ï¼šæŠ¥å‘Šè®¿é—®æ¨¡å¼åˆ†æ

---

## URLç»Ÿä¸€åŒ–è®¾è®¡ (v2.1)

### è®¾è®¡ç›®æ ‡
- **ç»Ÿä¸€ç”¨æˆ·ä½“éªŒ**ï¼šè°ƒç ”æŠ¥å‘Šå’Œåˆ†ææŠ¥å‘Šä½¿ç”¨ä¸€è‡´çš„URLæ ¼å¼
- **ä¿æŒç°æœ‰åŠŸèƒ½**ï¼šæ‰€æœ‰é¡µé¢æ¸²æŸ“å’Œè·³è½¬åŠŸèƒ½å®Œå…¨ä¿ç•™
- **äº¤äº’æ€§å®Œæ•´**ï¼šHTMLåˆ†ææŠ¥å‘Šçš„æ‰€æœ‰äº¤äº’åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### å®ç°æ–¹æ¡ˆ
1. **è°ƒç ”æŠ¥å‘Š**ï¼š`/reports/research/[slug]` - Next.jsé¡µé¢æ¸²æŸ“Markdownå†…å®¹
2. **åˆ†ææŠ¥å‘Š**ï¼š`/reports/analysis/[slug]` - è·¯ç”±å¤„ç†å™¨ç›´æ¥è¿”å›HTMLå†…å®¹

### URLæ˜ å°„å…³ç³»
```
Pool Table æ•°æ®æº:
â”œâ”€â”€ research.url: '/reports/research/[slug]'    â†’ Next.jsé¡µé¢æ¸²æŸ“
â””â”€â”€ analysis.url: '/reports/analysis/[slug]'    â†’ è·¯ç”±å¤„ç†å™¨ç›´æ¥è¿”å›HTML

ç”¨æˆ·è®¿é—®è·¯å¾„:
/reports/analysis/tapp â†’ ç›´æ¥è¿”å›å®Œæ•´HTMLï¼ˆé›¶é‡å®šå‘ï¼Œæœ€ä¼˜æ€§èƒ½ï¼‰
```

### æŠ€æœ¯æ¶æ„ä¼˜åŒ–
- **è°ƒç ”æŠ¥å‘Š**: ä½¿ç”¨ `page.tsx` + remark å¤„ç†Markdown
- **åˆ†ææŠ¥å‘Š**: ä½¿ç”¨ `route.ts` ç›´æ¥è¿”å›HTMLæ–‡ä»¶å†…å®¹
- **æ€§èƒ½æå‡**: æ¶ˆé™¤äº†é‡å®šå‘æ­¥éª¤ï¼Œå‡å°‘ä¸€æ¬¡HTTPè¯·æ±‚

### SEOä¼˜åŒ–ç­–ç•¥ (v2.3)

#### æ¸²æŸ“æ–¹å¼å¯¹æ¯”
| ç±»å‹ | å®ç°æ–¹å¼ | SEOæ”¶å½• | ç”¨æˆ·ä½“éªŒ | ç»´æŠ¤æˆæœ¬ |
|------|---------|---------|----------|----------|
| è°ƒç ”æŠ¥å‘Š | CSR (Client-Side) | âŒ ä»…éª¨æ¶å± | âœ… å®Œæ•´äº¤äº’ | ğŸ”„ ä¸­ç­‰ |
| åˆ†ææŠ¥å‘Š | SSR (route.ts) | âœ… å®Œæ•´å†…å®¹ | âœ… åŸç”ŸHTML | âš¡ ä½ |

#### æ”¶å½•å……åˆ†æ€§éªŒè¯
**HTMLåˆ†ææŠ¥å‘ŠSEOä¼˜åŠ¿**:
- âœ… 424è¡Œå®Œæ•´HTMLå†…å®¹
- âœ… 32ä¸ªæ ¸å¿ƒå…³é”®è¯ (DeFi/æŠ•èµ„/åˆ†æ/é£é™©/æ”¶ç›Š)
- âœ… ç»“æ„åŒ–æ ‡é¢˜å±‚çº§ (H1â†’H2â†’H3)
- âœ… è¯­ä¹‰åŒ–HTMLæ ‡ç­¾ (header/nav/main/section)
- âœ… æœç´¢å¼•æ“å‹å¥½çš„å†…å®¹ç»“æ„

**æœç´¢å¼•æ“çˆ¬è™«éªŒè¯**:
```bash
# Googlebotæµ‹è¯•ç»“æœ
curl -A "Googlebot/2.1" localhost:3001/reports/analysis/tapp
# âœ… è¿”å›å®Œæ•´HTML: "Tapp Exchange: äº¤äº’å¼æŠ•èµ„åˆ†æä»ªè¡¨ç›˜"

curl -A "Googlebot/2.1" localhost:3001/reports/research/tapp
# âŒ è¿”å›åŠ è½½éª¨æ¶å±ï¼Œéœ€JavaScriptæ¸²æŸ“å†…å®¹
```

#### æ¶æ„å†³ç­–
**ä¿æŒæ··åˆç­–ç•¥çš„ç†ç”±**:
1. **SEOéœ€æ±‚æ»¡è¶³**: HTMLåˆ†ææŠ¥å‘Šæä¾›å……åˆ†æœç´¢å¼•æ“å†…å®¹
2. **ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**: è°ƒç ”æŠ¥å‘Šä¿æŒç°æœ‰äº¤äº’ä½“éªŒ
3. **å¼€å‘æ•ˆç‡**: é¿å…å¤§è§„æ¨¡æ¶æ„é‡æ„
4. **å†…å®¹äº’è¡¥**: åˆ†ææŠ¥å‘Š(æŠ•èµ„å†³ç­–) + è°ƒç ”æŠ¥å‘Š(æŠ€æœ¯ç»†èŠ‚)

---

*æ–‡æ¡£æ›´æ–°æ—¶é—´ï¼š2025-01-24*  
*ç‰ˆæœ¬ï¼šv2.4 - SEOç­–ç•¥ä¼˜åŒ–ä¸æ¶æ„å†³ç­–æ–‡æ¡£åŒ–*