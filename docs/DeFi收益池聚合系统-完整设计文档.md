# DeFiæ”¶ç›Šæ± èšåˆä¿¡æ¯ç½‘ç«™ç³»ç»Ÿ - å®Œæ•´è®¾è®¡æ–‡æ¡£

## ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°å’Œç³»ç»Ÿæ¶æ„](#1-é¡¹ç›®æ¦‚è¿°å’Œç³»ç»Ÿæ¶æ„)
2. [æŠ€æœ¯è§„èŒƒå’Œæ•°æ®æ¨¡å‹](#2-æŠ€æœ¯è§„èŒƒå’Œæ•°æ®æ¨¡å‹)
3. [APIæ¥å£è®¾è®¡](#3-apiæ¥å£è®¾è®¡)
4. [ç”¨æˆ·ç•Œé¢è®¾è®¡](#4-ç”¨æˆ·ç•Œé¢è®¾è®¡)
5. [SEOä¼˜åŒ–ç­–ç•¥](#5-seoä¼˜åŒ–ç­–ç•¥)
6. [éƒ¨ç½²æŒ‡å—å’Œè¿ç»´](#6-éƒ¨ç½²æŒ‡å—å’Œè¿ç»´)
7. [å¼€å‘æŒ‡å—å’Œä»£ç è§„èŒƒ](#7-å¼€å‘æŒ‡å—å’Œä»£ç è§„èŒƒ)
8. [ç”¨æˆ·æ‰‹å†Œå’ŒFAQ](#8-ç”¨æˆ·æ‰‹å†Œå’Œfaq)

---

## ç‰ˆæœ¬ä¿¡æ¯
- **æ–‡æ¡£ç‰ˆæœ¬**: v1.1.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-01-23
- **æœ€åæ›´æ–°**: 2025-01-24
- **è®¾è®¡è€…**: Claude AI Assistant
- **å®¡æ ¸çŠ¶æ€**: è®¾è®¡é˜¶æ®µ

## æ›´æ–°æ—¥å¿—
### v1.1.0 (2025-01-24)
- âœ… æ–°å¢å¤šå­—æ®µç»„åˆæ’åºç³»ç»Ÿ
- âœ… é‡æ„æ’åºAPIæ¥å£è®¾è®¡
- âœ… æ›´æ–°ç”¨æˆ·æ‰‹å†Œæ’åºåŠŸèƒ½è¯´æ˜
- âœ… ä¼˜åŒ–æé«˜é£é™©æ ‡ç­¾é¢œè‰²æ˜¾ç¤º

---

# 1. é¡¹ç›®æ¦‚è¿°å’Œç³»ç»Ÿæ¶æ„

## 1.1 é¡¹ç›®èƒŒæ™¯

DeFiæ”¶ç›Šæ± èšåˆä¿¡æ¯ç½‘ç«™ç³»ç»Ÿæ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºWeb3é¢†åŸŸDeFiç©å®¶è®¾è®¡çš„ä¸€ç«™å¼æ”¶ç›Šç­–ç•¥ä¿¡æ¯å¹³å°ã€‚è¯¥ç³»ç»ŸåŸºäºç°æœ‰çš„Web3 Farm Dashboardæ¶æ„ï¼Œç»§æ‰¿äº†å…¶ä¼˜ç§€çš„æ•°æ®å¤„ç†é€»è¾‘å’Œä¸‰å±‚æ–‡æ¡£æ¶æ„è®¾è®¡ï¼ŒåŒæ—¶é¢å‘æ›´å¹¿æ³›çš„ç”¨æˆ·ç¾¤ä½“æä¾›Webè®¿é—®æœåŠ¡ã€‚

## 1.2 ç›®æ ‡ç”¨æˆ·

- **ä¸»è¦ç”¨æˆ·**: Web3é¢†åŸŸçš„DeFiæŠ•èµ„è€…å’Œç­–ç•¥ç ”ç©¶è€…
- **æ¬¡è¦ç”¨æˆ·**: åŒºå—é“¾ç ”ç©¶æœºæ„ã€DeFiåè®®å¼€å‘è€…
- **æ½œåœ¨ç”¨æˆ·**: å¯¹DeFiæ”¶ç›Šæ„Ÿå…´è¶£çš„ä¼ ç»Ÿé‡‘èä»ä¸šäººå‘˜

## 1.3 æ ¸å¿ƒä»·å€¼ä¸»å¼ 

1. **ä¿¡æ¯èšåˆ**: é›†ä¸­å±•ç¤ºå„ç±»DeFiæ”¶ç›Šæ± çš„å…³é”®ä¿¡æ¯
2. **ä¸“ä¸šåˆ†æ**: æä¾›æ·±åº¦è°ƒç ”æŠ¥å‘Šå’Œé£é™©è¯„ä¼°
3. **æ™ºèƒ½è¿‡æ»¤**: æ”¯æŒå¤šç»´åº¦ç­›é€‰å’Œä¸ªæ€§åŒ–éœ€æ±‚åŒ¹é…
4. **å®æ—¶æ›´æ–°**: åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è‡ªåŠ¨æ›´æ–°æœºåˆ¶
5. **æ˜“äºè®¿é—®**: æ— éœ€å®‰è£…ï¼Œé€šè¿‡æµè§ˆå™¨å³å¯è®¿é—®

## 1.4 ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    subgraph "ç”¨æˆ·å±‚"
        A[Webæµè§ˆå™¨]
        B[ç§»åŠ¨è®¾å¤‡]
        C[æœç´¢å¼•æ“çˆ¬è™«]
    end
    
    subgraph "CDN/è¾¹ç¼˜å±‚"
        D[Vercel Edge Network]
        E[é™æ€èµ„æºç¼“å­˜]
    end
    
    subgraph "åº”ç”¨å±‚"
        F[Next.jsåº”ç”¨]
        G[APIè·¯ç”±]
        H[é™æ€ç”Ÿæˆå™¨]
    end
    
    subgraph "æ•°æ®å±‚"
        I[æ–‡ä»¶ç³»ç»Ÿæ•°æ®]
        J[Supabaseæ•°æ®åº“]
        K[ç¼“å­˜å±‚]
    end
    
    subgraph "æ•°æ®æº"
        L[web3/poolsç›®å½•]
        M[web3/protocolç›®å½•]
        N[è°ƒç ”æŠ¥å‘ŠMDæ–‡ä»¶]
        O[åˆ†ææŠ¥å‘ŠHTMLæ–‡ä»¶]
    end
    
    A --> D
    B --> D
    C --> D
    D --> F
    F --> G
    F --> H
    G --> I
    G --> J
    H --> I
    I --> L
    I --> M
    I --> N
    I --> O
    F --> K
```

## 1.5 æŠ€æœ¯æ ˆé€‰æ‹©

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Next.js 14 (App Router)
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: Tailwind CSS + Shadcn/ui
- **çŠ¶æ€ç®¡ç†**: React Context + useState
- **æ•°æ®è·å–**: Next.jså†…ç½®æ•°æ®è·å–

### åç«¯æŠ€æœ¯æ ˆ
- **è¿è¡Œæ—¶**: Node.js 18+
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **æ–‡ä»¶å¤„ç†**: Node.js fsæ¨¡å— + gray-matter
- **ç¼“å­˜**: å†…å­˜ç¼“å­˜ + Vercelç¼“å­˜

### éƒ¨ç½²æŠ€æœ¯æ ˆ
- **ä¸»è¦å¹³å°**: Vercel (æ¨è)
- **å¤‡é€‰å¹³å°**: è‡ªæœ‰æœåŠ¡å™¨ (Nginx + PM2)
- **å®¹å™¨åŒ–**: Docker (å¯é€‰)
- **ç›‘æ§**: Vercel Analytics

---

# 2. æŠ€æœ¯è§„èŒƒå’Œæ•°æ®æ¨¡å‹

## 2.1 æ•°æ®æ¨¡å‹è®¾è®¡

### 2.1.1 æ ¸å¿ƒæ•°æ®ç±»å‹

```typescript
// Pool æ”¶ç›Šæ± æ•°æ®æ¨¡å‹
interface Pool {
  id: string;
  name: string;                    // æ”¶ç›Šæ± åç§°
  protocol: {
    name: string;                  // åè®®åç§°
    website: string;               // å®˜ç½‘é“¾æ¥
    nickname: string;              // åè®®ç®€ç§°
    description?: string;          // åè®®æè¿°
  };
  type: string;                    // æ”¶ç›Šæ± ç±»å‹ (StableLP, Future, etc.)
  chain: string[];                 // æ‰€å±é“¾ (["Aptos", "Ethereum"])
  risk: RiskLevel;                 // é£é™©ç­‰çº§
  token: string;                   // Token ç±»å‹
  aprRange: {
    low: number;                   // æœ€ä½ APR
    high: number;                  // æœ€é«˜ APR
  };
  market: string[];                // é€‚ç”¨å¸‚åœº
  underlying?: string;             // åº•å±‚èµ„äº§
  danger?: string;                 // é£é™©æè¿°
  scenarios?: string;              // åº”ç”¨åœºæ™¯
  reports: {
    research?: {                   // è°ƒç ”æŠ¥å‘Š
      exists: boolean;
      path?: string;
      url?: string;
    };
    analysis?: {                   // åˆ†ææŠ¥å‘Š
      exists: boolean;
      path?: string;
      url?: string;
    };
  };
  createdAt: Date;
  updatedAt: Date;
}

// é£é™©ç­‰çº§æšä¸¾
enum RiskLevel {
  LOW = "ä½é£é™©",
  MEDIUM = "ä¸­é£é™©", 
  HIGH = "é«˜é£é™©",
  VERY_HIGH = "æé«˜é£é™©"
}

// æ’åºå­—æ®µç±»å‹
type SortFieldType = 'apr-high' | 'apr-low' | 'risk';

// å•ä¸ªæ’åºå­—æ®µå®šä¹‰
interface SortField {
  field: SortFieldType;
  order: 'asc' | 'desc';
}

// ç”¨æˆ·è¯·æ±‚æ•°æ®æ¨¡å‹
interface UserRequest {
  id: string;
  poolName: string;               // æ”¶ç›Šæ± åç§°
  protocolName: string;           // åè®®åç§°
  description: string;            // è¯·æ±‚æè¿°
  userEmail?: string;             // ç”¨æˆ·é‚®ç®±
  status: RequestStatus;          // è¯·æ±‚çŠ¶æ€
  priority: RequestPriority;      // ä¼˜å…ˆçº§
  submittedAt: Date;
  processedAt?: Date;
  notes?: string;                 // å¤„ç†å¤‡æ³¨
}

enum RequestStatus {
  PENDING = "pending",
  IN_PROGRESS = "in_progress", 
  COMPLETED = "completed",
  REJECTED = "rejected"
}

enum RequestPriority {
  LOW = "low",
  MEDIUM = "medium",
  HIGH = "high"
}
```

### 2.1.2 ä¸‰å±‚æ•°æ®æ¶æ„

åŸºäºç°æœ‰Web3 Farm Dashboardçš„æˆç†Ÿæ¶æ„ï¼š

```
ç¬¬ä¸€å±‚: Protocol Layer (åè®®å±‚)
â”œâ”€â”€ åŸºç¡€ä¿¡æ¯: å®˜ç½‘ã€ç®€ç§°ã€æè¿°
â”œâ”€â”€ è°ƒç ”æŠ¥å‘Š: é“¾æ¥åˆ°researchç›®å½•
â””â”€â”€ ç¨³å®šæ€§: å˜æ›´é¢‘ç‡ä½ï¼Œä¸»è¦ç”¨äºå¼•ç”¨

ç¬¬äºŒå±‚: Pool Layer (æ”¶ç›Šæ± å±‚)  
â”œâ”€â”€ æŠ€æœ¯å‚æ•°: APRèŒƒå›´ã€é£é™©ç­‰çº§ã€Tokenç±»å‹
â”œâ”€â”€ åè®®å…³è”: å¼ºåˆ¶é“¾æ¥åˆ°Protocolæ–‡æ¡£
â””â”€â”€ é…ç½®ç®¡ç†: é›†ä¸­ç®¡ç†æŠ•èµ„æ ‡çš„å‚æ•°

ç¬¬ä¸‰å±‚: Request Layer (è¯·æ±‚å±‚)
â”œâ”€â”€ ç”¨æˆ·è¯·æ±‚: å­˜å‚¨åœ¨Supabaseæ•°æ®åº“
â”œâ”€â”€ çŠ¶æ€ç®¡ç†: pending/processing/completed
â””â”€â”€ é€šçŸ¥æœºåˆ¶: é‚®ä»¶é€šçŸ¥(å¯é€‰)
```

### 2.1.3 æ–‡ä»¶ç³»ç»Ÿæ˜ å°„

```
web3/
â”œâ”€â”€ protocol/                  # åè®®åŸºç¡€ä¿¡æ¯
â”‚   â”œâ”€â”€ [Protocol Name].md     # åè®®å…ƒæ•°æ®
â”‚   â””â”€â”€ research/              # è°ƒç ”æŠ¥å‘Šç›®å½•
â”‚       â”œâ”€â”€ [nickname].md      # Markdownè°ƒç ”æŠ¥å‘Š
â”‚       â””â”€â”€ [nickname].html    # HTMLåˆ†ææŠ¥å‘Š
â””â”€â”€ pools/                     # æ”¶ç›Šæ± é…ç½®
    â”œâ”€â”€ cex/                   # ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€æ± 
    â”‚   â””â”€â”€ [CEX Product].md
    â””â”€â”€ chain/                 # é“¾ä¸ŠDeFiåè®®æ± 
        â””â”€â”€ [Protocol Pool].md
```

## 2.2 æ•°æ®å¤„ç†é€»è¾‘

### 2.2.1 æ•°æ®åŠ è½½å™¨è®¾è®¡

```typescript
// æ–‡ä»¶ç³»ç»Ÿæ•°æ®åŠ è½½å™¨
class DataLoader {
  // åŠ è½½æ‰€æœ‰æ”¶ç›Šæ± æ•°æ®
  static async loadAllPools(): Promise<Pool[]> {
    const pools: Pool[] = [];
    
    // è¯»å– CEX å’Œ Chain ç›®å½•
    const cexPools = await this.loadPoolsFromDirectory('web3/pools/cex');
    const chainPools = await this.loadPoolsFromDirectory('web3/pools/chain');
    
    pools.push(...cexPools, ...chainPools);
    
    // åŠ è½½åè®®ä¿¡æ¯å¹¶åˆå¹¶
    const protocolMap = await this.loadProtocolMap();
    
    return pools.map(pool => this.enrichPoolWithProtocol(pool, protocolMap));
  }

  // è§£æ Pool æ–‡ä»¶ (Markdown frontmatter)
  static async parsePoolFile(filePath: string): Promise<Pool> {
    const content = await fs.readFile(filePath, 'utf-8');
    const { data: frontmatter } = matter(content);
    
    return {
      id: path.basename(filePath, '.md'),
      name: path.basename(filePath, '.md'),
      protocol: { name: frontmatter.Protocol },
      type: frontmatter.Type,
      chain: Array.isArray(frontmatter.Chain) ? frontmatter.Chain : [frontmatter.Chain],
      risk: frontmatter.Risk,
      token: frontmatter.Token,
      aprRange: {
        low: frontmatter['APR-Low'] || 0,
        high: frontmatter['APR-High'] || 0,
      },
      market: Array.isArray(frontmatter.Market) ? frontmatter.Market : [frontmatter.Market],
      underlying: frontmatter.Underlying,
      danger: frontmatter.Danger,
      scenarios: frontmatter.Scenarios,
      reports: await this.checkReports(frontmatter.Protocol),
      createdAt: new Date(),
      updatedAt: new Date(),
    };
  }

  // æ£€æŸ¥æŠ¥å‘Šæ–‡ä»¶æ˜¯å¦å­˜åœ¨
  static async checkReports(protocolName: string) {
    const reports = { research: { exists: false }, analysis: { exists: false } };
    
    try {
      // æŸ¥æ‰¾è°ƒç ”æŠ¥å‘Š (MD)
      const researchPath = `web3/protocol/research/${protocolName}.md`;
      if (await fs.access(researchPath).then(() => true).catch(() => false)) {
        reports.research = {
          exists: true,
          path: researchPath,
          url: `/reports/research/${protocolName}`
        };
      }
      
      // æŸ¥æ‰¾åˆ†ææŠ¥å‘Š (HTML)
      const analysisPath = `web3/protocol/research/${protocolName}.html`;
      if (await fs.access(analysisPath).then(() => true).catch(() => false)) {
        reports.analysis = {
          exists: true,
          path: analysisPath,
          url: `/reports/analysis/${protocolName}`
        };
      }
    } catch (error) {
      console.warn('æ£€æŸ¥æŠ¥å‘Šæ–‡ä»¶æ—¶å‡ºé”™:', error);
    }
    
    return reports;
  }
}
```

## 2.3 ç¼“å­˜ç­–ç•¥

### 2.3.1 å¤šå±‚ç¼“å­˜æ¶æ„

```mermaid
graph LR
    A[ç”¨æˆ·è¯·æ±‚] --> B{Edgeç¼“å­˜}
    B -->|å‘½ä¸­| C[è¿”å›ç¼“å­˜]
    B -->|æœªå‘½ä¸­| D[åº”ç”¨å±‚]
    D --> E{å†…å­˜ç¼“å­˜}
    E -->|å‘½ä¸­| F[è¿”å›æ•°æ®]
    E -->|æœªå‘½ä¸­| G[æ–‡ä»¶ç³»ç»Ÿ]
    G --> H[æ•°æ®å¤„ç†]
    H --> I[æ›´æ–°ç¼“å­˜]
    I --> F
    F --> C
```

### 2.3.2 ç¼“å­˜é…ç½®

```typescript
const CacheConfig = {
  // é™æ€èµ„æºç¼“å­˜
  staticMaxAge: 31536000, // 1å¹´
  
  // APIç¼“å­˜
  apiMaxAge: 3600, // 1å°æ—¶
  
  // é¡µé¢ç¼“å­˜
  pageMaxAge: 86400, // 1å¤©
  
  // å†…å­˜ç¼“å­˜
  memoryCache: {
    ttl: 300000, // 5åˆ†é’Ÿ
    maxSize: 1000 // æœ€å¤§1000ä¸ªæ¡ç›®
  }
};
```

---

# 3. APIæ¥å£è®¾è®¡

## 3.1 RESTful API ç«¯ç‚¹

```typescript
// API Routes è®¾è®¡
interface ApiRoutes {
  // è·å–æ”¶ç›Šæ± åˆ—è¡¨ (æ”¯æŒåˆ†é¡µã€è¿‡æ»¤ã€æ’åº)
  'GET /api/pools': {
    query: {
      page?: number;
      limit?: number;
      search?: string;              // æœç´¢å…³é”®è¯
      chain?: string[];             // é“¾è¿‡æ»¤
      risk?: RiskLevel[];           // é£é™©ç­‰çº§è¿‡æ»¤
      type?: string[];              // ç±»å‹è¿‡æ»¤
      token?: string[];             // Token è¿‡æ»¤
      market?: string[];            // å¸‚åœºè¿‡æ»¤
      aprMin?: number;              // æœ€ä½APRè¿‡æ»¤
      aprMax?: number;              // æœ€é«˜APRè¿‡æ»¤
      sorts?: SortField[];          // å¤šå­—æ®µç»„åˆæ’åºï¼ˆæ›¿ä»£ sortBy + sortOrderï¼‰
    };
    response: {
      pools: Pool[];
      total: number;
      page: number;
      limit: number;
      filters: {
        chains: string[];
        risks: RiskLevel[];
        types: string[];
        tokens: string[];
        markets: string[];
      };
    };
  };

  // è·å–å•ä¸ªæ”¶ç›Šæ± è¯¦æƒ…
  'GET /api/pools/[id]': {
    response: Pool | { error: string };
  };

  // è·å–è°ƒç ”æŠ¥å‘Šå†…å®¹
  'GET /api/reports/research/[nickname]': {
    response: {
      content: string;              // Markdown å†…å®¹
      metadata: {
        title: string;
        lastModified: Date;
        fileSize: number;
      };
    } | { error: string };
  };

  // è·å–åˆ†ææŠ¥å‘Šå†…å®¹  
  'GET /api/reports/analysis/[nickname]': {
    response: {
      content: string;              // HTML å†…å®¹
      metadata: {
        title: string;
        lastModified: Date;
        fileSize: number;
      };
    } | { error: string };
  };

  // æäº¤ç”¨æˆ·è¯·æ±‚
  'POST /api/requests': {
    body: {
      poolName: string;
      protocolName: string;
      description: string;
      userEmail?: string;
    };
    response: {
      success: boolean;
      requestId?: string;
      message: string;
    };
  };

  // è·å–è¿‡æ»¤å™¨é€‰é¡¹ (ç”¨äºå‰ç«¯ç­›é€‰å™¨)
  'GET /api/filters': {
    response: {
      chains: string[];
      risks: RiskLevel[];
      types: string[];
      tokens: string[];
      markets: string[];
      aprRange: { min: number; max: number };
    };
  };
}
```

## 3.2 APIå®ç°ç¤ºä¾‹

### 3.2.1 è·å–æ”¶ç›Šæ± åˆ—è¡¨

```typescript
// pages/api/pools.ts
import { NextApiRequest, NextApiResponse } from 'next';
import { DataLoader } from '../../lib/dataLoader';

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  if (req.method !== 'GET') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  try {
    const {
      page = 1,
      limit = 20,
      search,
      chain,
      risk,
      type,
      token,
      market,
      aprMin,
      aprMax,
      sorts
    } = req.query;

    // åŠ è½½æ‰€æœ‰æ± æ•°æ®
    const allPools = await DataLoader.loadAllPools();
    
    // åº”ç”¨è¿‡æ»¤å™¨
    let filteredPools = allPools;
    
    if (search) {
      filteredPools = filteredPools.filter(pool =>
        pool.name.toLowerCase().includes(search.toLowerCase()) ||
        pool.protocol.name.toLowerCase().includes(search.toLowerCase())
      );
    }
    
    if (chain) {
      const chains = Array.isArray(chain) ? chain : [chain];
      filteredPools = filteredPools.filter(pool =>
        pool.chain.some(c => chains.includes(c))
      );
    }
    
    if (risk) {
      const risks = Array.isArray(risk) ? risk : [risk];
      filteredPools = filteredPools.filter(pool =>
        risks.includes(pool.risk)
      );
    }
    
    if (aprMin || aprMax) {
      filteredPools = filteredPools.filter(pool => {
        const poolApr = (pool.aprRange.low + pool.aprRange.high) / 2;
        return (!aprMin || poolApr >= Number(aprMin)) &&
               (!aprMax || poolApr <= Number(aprMax));
      });
    }
    
    // è§£æå¤šå­—æ®µæ’åºå‚æ•°
    let sortFields: SortField[] = [];
    if (sorts) {
      try {
        sortFields = typeof sorts === 'string' ? JSON.parse(sorts) : sorts;
      } catch (error) {
        console.error('Error parsing sorts parameter:', error);
        sortFields = [];
      }
    }
    
    // åº”ç”¨å¤šå­—æ®µæ’åº
    if (sortFields.length > 0) {
      filteredPools.sort((a, b) => {
        // æŒ‰ç…§sortFieldsæ•°ç»„ä¸­çš„é¡ºåºé€ä¸ªæ¯”è¾ƒå­—æ®µ
        for (const { field, order } of sortFields) {
          let aValue, bValue;
          
          switch (field) {
            case 'apr-high':
              aValue = a.aprRange.high;
              bValue = b.aprRange.high;
              break;
            case 'apr-low':
              aValue = a.aprRange.low;
              bValue = b.aprRange.low;
              break;
            case 'risk':
              const riskOrder = { 'ä½é£é™©': 1, 'ä¸­é£é™©': 2, 'é«˜é£é™©': 3, 'æé«˜é£é™©': 4 };
              aValue = riskOrder[a.risk];
              bValue = riskOrder[b.risk];
              break;
            default:
              continue; // è·³è¿‡æœªçŸ¥å­—æ®µ
          }
          
          let result = 0;
          if (aValue < bValue) result = -1;
          else if (aValue > bValue) result = 1;
          
          if (result !== 0) {
            return order === 'asc' ? result : -result;
          }
        }
        
        return 0; // æ‰€æœ‰å­—æ®µéƒ½ç›¸ç­‰
      });
    }
    
    // åº”ç”¨åˆ†é¡µ
    const startIndex = (Number(page) - 1) * Number(limit);
    const endIndex = startIndex + Number(limit);
    const paginatedPools = filteredPools.slice(startIndex, endIndex);
    
    // ç”Ÿæˆè¿‡æ»¤å™¨é€‰é¡¹
    const filters = generateFilterOptions(allPools);
    
    res.status(200).json({
      pools: paginatedPools,
      total: filteredPools.length,
      page: Number(page),
      limit: Number(limit),
      filters
    });
    
  } catch (error) {
    console.error('API Error:', error);
    res.status(500).json({ error: 'Internal server error' });
  }
}

function generateFilterOptions(pools: Pool[]) {
  const chains = [...new Set(pools.flatMap(p => p.chain))];
  const risks = [...new Set(pools.map(p => p.risk))];
  const types = [...new Set(pools.map(p => p.type))];
  const tokens = [...new Set(pools.map(p => p.token))];
  const markets = [...new Set(pools.flatMap(p => p.market))];
  
  return { chains, risks, types, tokens, markets };
}
```

### 3.2.2 æäº¤ç”¨æˆ·è¯·æ±‚

```typescript
// pages/api/requests.ts
import { NextApiRequest, NextApiResponse } from 'next';
import { supabase } from '../../lib/supabase';

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  try {
    const { poolName, protocolName, description, userEmail } = req.body;
    
    // éªŒè¯å¿…å¡«å­—æ®µ
    if (!poolName || !protocolName || !description) {
      return res.status(400).json({
        success: false,
        message: 'è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ'
      });
    }
    
    // å­˜å‚¨åˆ°Supabase
    const { data, error } = await supabase
      .from('user_requests')
      .insert([
        {
          pool_name: poolName,
          protocol_name: protocolName,
          description,
          user_email: userEmail,
          status: 'pending',
          priority: 'medium',
          submitted_at: new Date().toISOString()
        }
      ])
      .select();
    
    if (error) {
      throw error;
    }
    
    // å¯é€‰ï¼šå‘é€é€šçŸ¥é‚®ä»¶
    if (process.env.ENABLE_EMAIL_NOTIFICATIONS === 'true') {
      await sendNotificationEmail(data[0]);
    }
    
    res.status(200).json({
      success: true,
      requestId: data[0].id,
      message: 'è¯·æ±‚æäº¤æˆåŠŸï¼Œæˆ‘ä»¬å°†å°½å¿«å¤„ç†'
    });
    
  } catch (error) {
    console.error('Request submission error:', error);
    res.status(500).json({
      success: false,
      message: 'æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'
    });
  }
}
```

## 3.3 é”™è¯¯å¤„ç†è§„èŒƒ

### 3.3.1 HTTPçŠ¶æ€ç ä½¿ç”¨

| çŠ¶æ€ç  | å«ä¹‰ | ä½¿ç”¨åœºæ™¯ |
|--------|------|----------|
| 200 | æˆåŠŸ | è¯·æ±‚æˆåŠŸå¤„ç† |
| 400 | è¯·æ±‚é”™è¯¯ | å‚æ•°éªŒè¯å¤±è´¥ |
| 404 | æœªæ‰¾åˆ° | èµ„æºä¸å­˜åœ¨ |
| 405 | æ–¹æ³•ä¸å…è®¸ | HTTPæ–¹æ³•é”™è¯¯ |
| 429 | è¯·æ±‚è¿‡å¤š | è§¦å‘é™æµ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | å†…éƒ¨é”™è¯¯ |

### 3.3.2 é”™è¯¯å“åº”æ ¼å¼

```typescript
interface ErrorResponse {
  error: string;           // é”™è¯¯ç±»å‹
  message: string;         // ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
  details?: any;          // é”™è¯¯è¯¦æƒ…(å¼€å‘ç¯å¢ƒ)
  timestamp: string;       // é”™è¯¯æ—¶é—´æˆ³
  path: string;           // è¯·æ±‚è·¯å¾„
}
```

---

# 4. ç”¨æˆ·ç•Œé¢è®¾è®¡

## 4.1 é¡µé¢ç»“æ„è®¾è®¡

### 4.1.1 è·¯ç”±è®¾è®¡

```
/                          # é¦–é¡µ - æ”¶ç›Šæ± èšåˆè¡¨æ ¼
/reports/research/[nickname]  # è°ƒç ”æŠ¥å‘Šé¡µé¢ (MD)
/reports/analysis/[nickname]  # åˆ†ææŠ¥å‘Šé¡µé¢ (HTML)
/request                   # æäº¤è¯·æ±‚é¡µé¢
/404                      # 404é”™è¯¯é¡µé¢
```

### 4.1.2 ç»„ä»¶å±‚æ¬¡æ¶æ„

```mermaid
graph TD
    A[App Layout] --> B[Navigation]
    A --> C[Main Content]
    A --> D[Footer]
    
    C --> E[Home Page]
    C --> F[Report Pages]
    C --> G[Request Page]
    
    E --> H[Search Bar]
    E --> I[Filter Panel]
    E --> J[Pool Table]
    E --> K[Pagination]
    
    J --> L[Table Header]
    J --> M[Pool Row]
    J --> N[Loading State]
    
    M --> O[Risk Badge]
    M --> P[Chain Tags]
    M --> Q[Action Links]
```

## 4.2 ä¸»è¦ç»„ä»¶è®¾è®¡

### 4.2.1 é¦–é¡µèšåˆè¡¨æ ¼ç»„ä»¶

```tsx
interface PoolTableProps {
  pools: Pool[];
  filters: FilterOptions;
  pagination: PaginationInfo;
}

const PoolTable: React.FC<PoolTableProps> = ({ pools, filters, pagination }) => {
  return (
    <div className="container mx-auto px-4 py-8">
      {/* é¡µé¢æ ‡é¢˜ */}
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-gray-900 mb-2">
          DeFi æ”¶ç›Šæ± èšåˆå¹³å°
        </h1>
        <p className="text-gray-600 max-w-2xl">
          ä¸º Web3 DeFi ç©å®¶æä¾›ä¸€ç«™å¼æ”¶ç›Šç­–ç•¥ä¿¡æ¯ï¼ŒåŒ…å«è¯¦ç»†çš„è°ƒç ”æŠ¥å‘Šå’Œé£é™©åˆ†æ
        </p>
      </div>

      {/* æœç´¢å’Œè¿‡æ»¤å™¨ */}
      <div className="mb-6 space-y-4">
        <SearchBar />
        <FilterPanel filters={filters} />
      </div>

      {/* æ•°æ®è¡¨æ ¼ */}
      <div className="bg-white rounded-lg shadow-sm border">
        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-gray-50 border-b">
              <tr>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">æ”¶ç›Šæ± </th>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">åè®®</th>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">ç±»å‹</th>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">æ‰€å±é“¾</th>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">é£é™©ç­‰çº§</th>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">Token</th>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">æ”¶ç›ŠèŒƒå›´</th>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">é€‚ç”¨å¸‚åœº</th>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">è°ƒç ”æŠ¥å‘Š</th>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">åˆ†ææŠ¥å‘Š</th>
                <th className="px-4 py-3 text-left text-sm font-medium text-gray-900">å®˜ç½‘</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-gray-200">
              {pools.map(pool => (
                <PoolRow key={pool.id} pool={pool} />
              ))}
            </tbody>
          </table>
        </div>
      </div>

      {/* åˆ†é¡µç»„ä»¶ */}
      <Pagination {...pagination} />

      {/* æäº¤è¯·æ±‚æŒ‰é’® */}
      <div className="mt-8 text-center">
        <Link 
          href="/request"
          className="inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors"
        >
          <PlusIcon className="w-5 h-5 mr-2" />
          æäº¤æ”¶å½•è¯·æ±‚
        </Link>
      </div>
    </div>
  );
};
```

### 4.2.2 è¿‡æ»¤å™¨ç»„ä»¶

```tsx
const FilterPanel: React.FC<{ filters: FilterOptions }> = ({ filters }) => {
  return (
    <div className="bg-white p-4 rounded-lg border space-y-4">
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        {/* é“¾è¿‡æ»¤ */}
        <MultiSelectFilter
          label="åŒºå—é“¾"
          options={filters.chains}
          paramKey="chain"
        />
        
        {/* é£é™©ç­‰çº§è¿‡æ»¤ */}
        <MultiSelectFilter
          label="é£é™©ç­‰çº§"
          options={filters.risks}
          paramKey="risk"
        />
        
        {/* ç±»å‹è¿‡æ»¤ */}
        <MultiSelectFilter
          label="æŠ•èµ„ç±»å‹"
          options={filters.types}
          paramKey="type"
        />
        
        {/* Tokenè¿‡æ»¤ */}
        <MultiSelectFilter
          label="Token"
          options={filters.tokens}
          paramKey="token"
        />
      </div>
      
      {/* APRèŒƒå›´è¿‡æ»¤ */}
      <div className="border-t pt-4">
        <RangeFilter
          label="APRæ”¶ç›ŠèŒƒå›´"
          min={filters.aprRange.min}
          max={filters.aprRange.max}
          paramKey="apr"
        />
      </div>
    </div>
  );
};
```

### 4.2.3 é£é™©ç­‰çº§å¾½ç« ç»„ä»¶

```tsx
const RiskBadge: React.FC<{ risk: RiskLevel }> = ({ risk }) => {
  const riskConfig = {
    [RiskLevel.LOW]: { color: 'bg-green-100 text-green-800', text: 'ä½é£é™©' },
    [RiskLevel.MEDIUM]: { color: 'bg-yellow-100 text-yellow-800', text: 'ä¸­é£é™©' },
    [RiskLevel.HIGH]: { color: 'bg-orange-100 text-orange-800', text: 'é«˜é£é™©' },
    [RiskLevel.VERY_HIGH]: { color: 'bg-red-100 text-red-800', text: 'æé«˜é£é™©' },
  };

  const config = riskConfig[risk];
  
  return (
    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>
      {config.text}
    </span>
  );
};
```

## 4.3 å“åº”å¼è®¾è®¡

### 4.3.1 æ–­ç‚¹è®¾è®¡

```css
/* Tailwind CSS æ–­ç‚¹ */
sm: 640px   /* å°å±è®¾å¤‡ */
md: 768px   /* å¹³æ¿è®¾å¤‡ */
lg: 1024px  /* æ¡Œé¢è®¾å¤‡ */
xl: 1280px  /* å¤§å±è®¾å¤‡ */
2xl: 1536px /* è¶…å¤§å±è®¾å¤‡ */
```

### 4.3.2 ç§»åŠ¨ç«¯ä¼˜åŒ–

```tsx
// ç§»åŠ¨ç«¯è¡¨æ ¼ä¼˜åŒ–
const MobilePoolCard: React.FC<{ pool: Pool }> = ({ pool }) => {
  return (
    <div className="bg-white p-4 rounded-lg border mb-4 md:hidden">
      <div className="flex justify-between items-start mb-3">
        <h3 className="font-semibold text-gray-900">{pool.name}</h3>
        <RiskBadge risk={pool.risk} />
      </div>
      
      <div className="space-y-2 text-sm">
        <div className="flex justify-between">
          <span className="text-gray-600">åè®®:</span>
          <span className="font-medium">{pool.protocol.name}</span>
        </div>
        
        <div className="flex justify-between">
          <span className="text-gray-600">APR:</span>
          <span className="font-medium">{pool.aprRange.low}% - {pool.aprRange.high}%</span>
        </div>
        
        <div className="flex justify-between items-center">
          <span className="text-gray-600">æŠ¥å‘Š:</span>
          <div className="flex space-x-2">
            {pool.reports.research?.exists && (
              <a href={pool.reports.research.url} className="text-blue-600 text-xs">
                è°ƒç ”
              </a>
            )}
            {pool.reports.analysis?.exists && (
              <a href={pool.reports.analysis.url} className="text-purple-600 text-xs">
                åˆ†æ
              </a>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};
```

## 4.4 ç”¨æˆ·äº¤äº’è®¾è®¡

### 4.4.1 åŠ è½½çŠ¶æ€

```tsx
// éª¨æ¶å±ç»„ä»¶
const PoolTableSkeleton: React.FC = () => {
  return (
    <div className="animate-pulse">
      <div className="bg-white rounded-lg shadow-sm border">
        <div className="p-4 border-b">
          <div className="h-4 bg-gray-200 rounded w-1/4 mb-2"></div>
          <div className="h-3 bg-gray-200 rounded w-1/2"></div>
        </div>
        
        {Array.from({ length: 5 }).map((_, i) => (
          <div key={i} className="p-4 border-b last:border-b-0">
            <div className="flex justify-between items-center">
              <div className="h-4 bg-gray-200 rounded w-1/4"></div>
              <div className="h-6 bg-gray-200 rounded w-16"></div>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};
```

### 4.4.2 é”™è¯¯çŠ¶æ€

```tsx
// é”™è¯¯è¾¹ç•Œç»„ä»¶
const ErrorBoundary: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [hasError, setHasError] = useState(false);
  
  if (hasError) {
    return (
      <div className="text-center py-12">
        <div className="text-red-500 mb-4">
          <ExclamationTriangleIcon className="w-12 h-12 mx-auto" />
        </div>
        <h3 className="text-lg font-semibold text-gray-900 mb-2">
          å‡ºç°äº†ä¸€äº›é—®é¢˜
        </h3>
        <p className="text-gray-600 mb-4">
          é¡µé¢åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•
        </p>
        <button
          onClick={() => window.location.reload()}
          className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
        >
          é‡æ–°åŠ è½½
        </button>
      </div>
    );
  }
  
  return <>{children}</>;
};
```

## 4.5 æŠ¥å‘Šç³»ç»ŸæŠ€æœ¯å®ç°

### 4.5.1 æ–‡ä»¶å¤„ç†æ¶æ„

**åŒæ ¼å¼æ”¯æŒç­–ç•¥**
- **è°ƒç ”æŠ¥å‘Š**ï¼šMarkdownæ ¼å¼ï¼Œé€‚åˆæ–‡æœ¬é˜…è¯»å’ŒSEOä¼˜åŒ–
- **åˆ†ææŠ¥å‘Š**ï¼šHTMLæ ¼å¼ï¼Œæ”¯æŒäº¤äº’å¼å›¾è¡¨å’Œä¸°å¯Œçš„ç”¨æˆ·ä½“éªŒ

**æ–‡ä»¶å­˜å‚¨ç»“æ„**
```
web3/protocol/research/
â”œâ”€â”€ [nickname].md      # Markdownè°ƒç ”æŠ¥å‘Š
â””â”€â”€ [nickname].html    # HTMLåˆ†ææŠ¥å‘Š
```

### 4.5.2 åˆ†ææŠ¥å‘Šç›´æ¥è·³è½¬è®¾è®¡

**è®¾è®¡åŸåˆ™**
- **ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**ï¼šä¸€é”®ç›´è¾¾å®Œæ•´äº¤äº’å¼æŠ¥å‘Š
- **æ— ä¸­é—´é¡µé¢**ï¼šé¿å…ä¸å¿…è¦çš„åµŒå¥—å’Œç­‰å¾…
- **å®Œæ•´åŠŸèƒ½ä¿ç•™**ï¼šä¿æŒæ‰€æœ‰JavaScriptäº¤äº’åŠŸèƒ½

**æŠ€æœ¯å®ç°**

```typescript
// PoolTable.tsx - åˆ†ææŠ¥å‘ŠæŒ‰é’®ç‚¹å‡»å¤„ç†
onClick={() => {
  // ç›´æ¥æ‰“å¼€åŸå§‹HTMLæ–‡ä»¶ï¼Œè·³è¿‡ä¸­é—´é¡µé¢
  const slug = pool.reports.analysis?.url?.split('/').pop();
  if (slug) {
    window.open(`/api/reports/analysis/${slug}/raw`, '_blank');
  }
}}
```

**APIç«¯ç‚¹è®¾è®¡**
```typescript
// /api/reports/analysis/[slug]/raw/route.ts
export async function GET(
  request: NextRequest,
  { params }: { params: { slug: string } }
) {
  const { slug } = params;
  
  // ä¼˜å…ˆæŸ¥æ‰¾ç ”ç©¶ç›®å½•ä¸­çš„HTMLæ–‡ä»¶
  const researchHtmlPath = path.join(process.cwd(), 'web3', 'protocol', 'research', `${slug}.html`);
  
  if (fs.existsSync(researchHtmlPath)) {
    const content = fs.readFileSync(researchHtmlPath, 'utf8');
    
    // ç›´æ¥è¿”å›åŸå§‹HTMLï¼Œä¿æŒæ‰€æœ‰äº¤äº’åŠŸèƒ½
    return new NextResponse(content, {
      headers: {
        'Content-Type': 'text/html; charset=utf-8',
        'Cache-Control': 'public, max-age=3600',
      },
    });
  }
  
  return new NextResponse('Report not found', { status: 404 });
}
```

### 4.5.3 Markdownæ–‡ä»¶å¤„ç†æ–¹æ¡ˆ

**è°ƒç ”æŠ¥å‘Šæ¸²æŸ“æµç¨‹**
1. **æ–‡ä»¶è¯»å–**ï¼šä»`web3/protocol/research/[slug].md`è¯»å–æ–‡ä»¶
2. **Frontmatterè§£æ**ï¼šæå–å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€åè®®ã€æŒ‡æ ‡ç­‰ï¼‰
3. **Markdownè½¬æ¢**ï¼šä½¿ç”¨remark-gfmå¤„ç†è¡¨æ ¼è¯­æ³•
4. **HTMLè¾“å‡º**ï¼šè½¬æ¢ä¸ºå®‰å…¨çš„HTMLæ ¼å¼

```typescript
// /api/reports/research/[slug]/route.ts
import { remark } from 'remark';
import html from 'remark-html';
import remarkGfm from 'remark-gfm';  // è¡¨æ ¼æ”¯æŒ

// Markdownå¤„ç†ç®¡é“
const processedContent = await remark()
  .use(remarkGfm)  // å¯ç”¨GitHubé£æ ¼Markdownï¼ˆè¡¨æ ¼æ”¯æŒï¼‰
  .use(html, { sanitize: false })
  .process(markdownContent);
```

**è¡¨æ ¼æ¸²æŸ“ä¼˜åŒ–**
```css
/* globals.css - è¡¨æ ¼æ ·å¼ä¼˜åŒ– */
.prose table {
  @apply w-full border-collapse border border-gray-300 my-6;
}
.prose table thead {
  @apply bg-gray-50;
}
.prose table th {
  @apply border border-gray-300 px-4 py-3 text-left font-semibold text-gray-900;
}
.prose table td {
  @apply border border-gray-300 px-4 py-3 text-gray-800;
}
```

### 4.5.4 HTMLæ–‡ä»¶å¤„ç†æ–¹æ¡ˆ

**å®Œæ•´äº¤äº’ä¿ç•™ç­–ç•¥**
- **æ— å†…å®¹è¿‡æ»¤**ï¼šä¿æŒåŸå§‹HTMLçš„å®Œæ•´æ€§
- **JavaScriptæ‰§è¡Œ**ï¼šæ”¯æŒChart.jsç­‰åº“çš„æ­£å¸¸è¿è¡Œ
- **æ ·å¼ä¿æŒ**ï¼šç»´æŒåŸæœ‰çš„CSSæ ·å¼å’Œå¸ƒå±€
- **æ–°çª—å£æ‰“å¼€**ï¼šåœ¨ç‹¬ç«‹ç¯å¢ƒä¸­è¿è¡Œï¼Œé¿å…å†²çª

**å®‰å…¨è€ƒè™‘**
- **åŒæºç­–ç•¥**ï¼šHTMLæ–‡ä»¶é€šè¿‡APIç«¯ç‚¹æœåŠ¡ï¼Œç¬¦åˆåŒæºç­–ç•¥
- **ç¼“å­˜ç­–ç•¥**ï¼šè®¾ç½®åˆç†çš„ç¼“å­˜æ—¶é—´ï¼ˆ1å°æ—¶ï¼‰
- **é”™è¯¯å¤„ç†**ï¼šæä¾›å‹å¥½çš„404å’Œ500é”™è¯¯å¤„ç†

**ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
- **åŠ è½½æ€§èƒ½**ï¼šç›´æ¥æœåŠ¡åŸå§‹æ–‡ä»¶ï¼Œæ— é¢å¤–å¤„ç†å¼€é”€
- **å“åº”é€Ÿåº¦**ï¼šé™æ€æ–‡ä»¶æœåŠ¡ï¼Œå“åº”æ—¶é—´<100ms
- **å…¼å®¹æ€§**ï¼šæ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨çš„å®Œæ•´åŠŸèƒ½

### 4.5.5 æŠ¥å‘Šç³»ç»Ÿå·¥ä½œæµç¨‹

**ç”¨æˆ·äº¤äº’æµç¨‹**
```
ä¸»é¡µæ± è¡¨æ ¼ â†’ ç‚¹å‡»"æŸ¥çœ‹åˆ†æ" â†’ ç›´æ¥æ‰“å¼€å®Œæ•´HTMLæŠ¥å‘Š
     â†“
æ— ä¸­é—´é¡µé¢ï¼Œä¸€é”®åˆ°è¾¾ç›®æ ‡å†…å®¹
```

**æŠ€æœ¯æ•°æ®æµ**
```
ç”¨æˆ·ç‚¹å‡» â†’ JavaScriptæå–slug â†’ æ„é€ raw API URL â†’ æ–°çª—å£æ‰“å¼€ â†’ æœåŠ¡å™¨è¿”å›åŸå§‹HTML â†’ æµè§ˆå™¨æ¸²æŸ“å®Œæ•´æŠ¥å‘Š
```

**æ€§èƒ½æŒ‡æ ‡**
- **é¦–æ¬¡åŠ è½½æ—¶é—´**ï¼š<2ç§’
- **äº¤äº’å“åº”æ—¶é—´**ï¼š<100ms
- **å®Œæ•´åŠŸèƒ½å¯ç”¨**ï¼šChart.jså›¾è¡¨ã€åŠ¨ç”»ã€ç”¨æˆ·äº¤äº’å¡ç‰‡
- **ç§»åŠ¨ç«¯å…¼å®¹**ï¼šå“åº”å¼è®¾è®¡ï¼Œæ”¯æŒè§¦æ‘¸æ“ä½œ

---

# 5. SEOä¼˜åŒ–ç­–ç•¥

## 5.1 é™æ€ç”Ÿæˆç­–ç•¥

### 5.1.1 é¡µé¢é™æ€ç”Ÿæˆ

```typescript
// é¦–é¡µé™æ€ç”Ÿæˆ
export async function getStaticProps() {
  const pools = await DataLoader.loadAllPools();
  const filters = generateFilterOptions(pools);
  
  // ç”ŸæˆSEOå…ƒæ•°æ®
  const seoData = {
    title: 'DeFiæ”¶ç›Šæ± èšåˆå¹³å° - ä¸€ç«™å¼æ”¶ç›Šç­–ç•¥ä¿¡æ¯',
    description: 'ä¸ºWeb3 DeFiç©å®¶æä¾›ä¸“ä¸šçš„æ”¶ç›Šæ± ä¿¡æ¯èšåˆæœåŠ¡ï¼ŒåŒ…å«è¯¦ç»†çš„è°ƒç ”æŠ¥å‘Šã€é£é™©è¯„ä¼°å’Œå®æ—¶æ”¶ç›Šæ•°æ®ã€‚',
    keywords: 'DeFi, æ”¶ç›Šæ± , æµåŠ¨æ€§æŒ–çŸ¿, Web3æŠ•èµ„, åŒºå—é“¾ç†è´¢, APR, é£é™©è¯„ä¼°',
  };
  
  return {
    props: {
      pools: pools.slice(0, 50), // é¦–é¡µæ˜¾ç¤ºå‰50ä¸ª
      filters,
      seoData
    },
    revalidate: 3600 // 1å°æ—¶é‡æ–°ç”Ÿæˆ
  };
}

// è°ƒç ”æŠ¥å‘Šé¡µé¢é™æ€ç”Ÿæˆ
export async function getStaticPaths() {
  const reportFiles = await fs.readdir('web3/protocol/research');
  const mdFiles = reportFiles.filter(file => file.endsWith('.md'));
  
  const paths = mdFiles.map(file => ({
    params: { nickname: path.basename(file, '.md') }
  }));

  return {
    paths,
    fallback: 'blocking' // ISRæ”¯æŒæ–°æ–‡ä»¶
  };
}

export async function getStaticProps({ params }: { params: { nickname: string } }) {
  try {
    const filePath = `web3/protocol/research/${params.nickname}.md`;
    const content = await fs.readFile(filePath, 'utf-8');
    const { data: frontmatter, content: markdownContent } = matter(content);
    
    // ç”ŸæˆSEOå…ƒæ•°æ®
    const metadata = generateSEOMetadata(frontmatter, markdownContent, params.nickname);
    
    return {
      props: {
        content: markdownContent,
        metadata,
        seoData: metadata
      },
      revalidate: 3600 // 1å°æ—¶é‡æ–°ç”Ÿæˆ
    };
  } catch (error) {
    return {
      notFound: true
    };
  }
}
```

### 5.1.2 SEOå…ƒæ•°æ®ç”Ÿæˆ

```typescript
function generateSEOMetadata(frontmatter: any, content: string, nickname: string) {
  const title = frontmatter.title || `${nickname} æ·±åº¦è°ƒç ”æŠ¥å‘Š`;
  const description = frontmatter.description || extractDescription(content);
  const keywords = extractKeywords(content);
  
  return {
    title: `${title} | DeFiæ”¶ç›Šæ± èšåˆå¹³å°`,
    description: description.slice(0, 160),
    keywords: keywords.join(', '),
    canonical: `https://yoursite.com/reports/research/${nickname}`,
    openGraph: {
      title,
      description,
      type: 'article',
      url: `https://yoursite.com/reports/research/${nickname}`,
      images: [
        {
          url: `https://yoursite.com/og-images/${nickname}.png`,
          width: 1200,
          height: 630,
          alt: title
        }
      ]
    },
    twitter: {
      card: 'summary_large_image',
      title,
      description,
      images: [`https://yoursite.com/og-images/${nickname}.png`]
    }
  };
}

// æå–æè¿°
function extractDescription(content: string): string {
  // ç§»é™¤Markdownè¯­æ³•
  const plainText = content
    .replace(/#{1,6}\s+/g, '')
    .replace(/\*\*(.*?)\*\*/g, '$1')
    .replace(/\*(.*?)\*/g, '$1')
    .replace(/\[(.*?)\]\(.*?\)/g, '$1')
    .replace(/`(.*?)`/g, '$1');
    
  // å–å‰200ä¸ªå­—ç¬¦
  return plainText.slice(0, 200).trim();
}

// æå–å…³é”®è¯
function extractKeywords(content: string): string[] {
  const commonKeywords = ['DeFi', 'APR', 'APY', 'æ”¶ç›Šæ± ', 'æµåŠ¨æ€§æŒ–çŸ¿', 'é£é™©è¯„ä¼°'];
  const extractedKeywords = [];
  
  // ç®€å•çš„å…³é”®è¯æå–é€»è¾‘
  const words = content.toLowerCase().split(/\s+/);
  const wordCount = {};
  
  words.forEach(word => {
    if (word.length > 3) {
      wordCount[word] = (wordCount[word] || 0) + 1;
    }
  });
  
  // å–å‡ºç°é¢‘ç‡æœ€é«˜çš„è¯
  const sortedWords = Object.entries(wordCount)
    .sort(([, a], [, b]) => b - a)
    .slice(0, 5)
    .map(([word]) => word);
  
  return [...commonKeywords, ...sortedWords].slice(0, 10);
}
```

## 5.2 ç»“æ„åŒ–æ•°æ®

### 5.2.1 é¦–é¡µç»“æ„åŒ–æ•°æ®

```typescript
function generateStructuredData(pools: Pool[]) {
  return {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "DeFiæ”¶ç›Šæ± èšåˆå¹³å°",
    "description": "ä¸ºWeb3 DeFiç©å®¶æä¾›ä¸€ç«™å¼æ”¶ç›Šç­–ç•¥ä¿¡æ¯å¹³å°",
    "url": "https://yoursite.com",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://yoursite.com/?search={search_term_string}",
      "query-input": "required name=search_term_string"
    },
    "mainEntity": {
      "@type": "ItemList",
      "numberOfItems": pools.length,
      "itemListElement": pools.map((pool, index) => ({
        "@type": "ListItem",
        "position": index + 1,
        "item": {
          "@type": "FinancialProduct",
          "name": pool.name,
          "description": `${pool.protocol.name}çš„${pool.type}æ”¶ç›Šæ± `,
          "provider": {
            "@type": "Organization",
            "name": pool.protocol.name,
            "url": pool.protocol.website
          },
          "url": `https://yoursite.com/pools/${pool.id}`,
          "offers": {
            "@type": "Offer",
            "name": "APRæ”¶ç›ŠèŒƒå›´",
            "description": `${pool.aprRange.low}% - ${pool.aprRange.high}%`,
            "category": pool.type
          }
        }
      }))
    }
  };
}
```

### 5.2.2 æŠ¥å‘Šé¡µé¢ç»“æ„åŒ–æ•°æ®

```typescript
function generateReportStructuredData(metadata: ReportMetadata, content: string) {
  return {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": metadata.title,
    "description": metadata.description,
    "author": {
      "@type": "Organization",
      "name": "DeFiæ”¶ç›Šæ± èšåˆå¹³å°"
    },
    "publisher": {
      "@type": "Organization",
      "name": "DeFiæ”¶ç›Šæ± èšåˆå¹³å°",
      "logo": {
        "@type": "ImageObject",
        "url": "https://yoursite.com/logo.png"
      }
    },
    "datePublished": metadata.publishedDate,
    "dateModified": metadata.lastModified,
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": metadata.canonical
    },
    "articleSection": "DeFi Analysis",
    "keywords": metadata.keywords,
    "wordCount": content.length,
    "inLanguage": "zh-CN"
  };
}
```

## 5.3 ç½‘ç«™åœ°å›¾ç”Ÿæˆ

### 5.3.1 åŠ¨æ€ç½‘ç«™åœ°å›¾

```typescript
// pages/sitemap.xml.tsx
export async function getServerSideProps({ res }: { res: any }) {
  const sitemap = await generateSitemap();
  
  res.setHeader('Content-Type', 'text/xml');
  res.write(sitemap);
  res.end();
  
  return { props: {} };
}

async function generateSitemap() {
  const baseUrl = 'https://yoursite.com';
  const currentDate = new Date().toISOString();
  
  // è·å–æ‰€æœ‰é™æ€é¡µé¢
  const staticPages = [
    { url: '/', priority: 1.0, changefreq: 'daily' },
    { url: '/request', priority: 0.7, changefreq: 'monthly' }
  ];
  
  // è·å–æ‰€æœ‰è°ƒç ”æŠ¥å‘Š
  const researchFiles = await fs.readdir('web3/protocol/research');
  const researchPages = researchFiles
    .filter(file => file.endsWith('.md'))
    .map(file => ({
      url: `/reports/research/${path.basename(file, '.md')}`,
      priority: 0.9,
      changefreq: 'weekly',
      lastmod: currentDate
    }));
  
  // è·å–æ‰€æœ‰åˆ†ææŠ¥å‘Š
  const analysisFiles = researchFiles.filter(file => file.endsWith('.html'));
  const analysisPages = analysisFiles.map(file => ({
    url: `/reports/analysis/${path.basename(file, '.html')}`,
    priority: 0.9,
    changefreq: 'weekly',
    lastmod: currentDate
  }));
  
  const allPages = [...staticPages, ...researchPages, ...analysisPages];
  
  return `<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
${allPages.map(page => `
  <url>
    <loc>${baseUrl}${page.url}</loc>
    <lastmod>${page.lastmod || currentDate}</lastmod>
    <changefreq>${page.changefreq}</changefreq>
    <priority>${page.priority}</priority>
  </url>
`).join('')}
</urlset>`;
}
```

## 5.4 æ€§èƒ½ä¼˜åŒ–

### 5.4.1 Core Web Vitalsä¼˜åŒ–

```typescript
// Web Vitalsä¼˜åŒ–é…ç½®
const WebVitalsConfig = {
  // æ ¸å¿ƒç½‘é¡µæŒ‡æ ‡ç›®æ ‡
  LCP: '<2.5s',  // Largest Contentful Paint
  FID: '<100ms', // First Input Delay  
  CLS: '<0.1',   // Cumulative Layout Shift
  
  // ä¼˜åŒ–ç­–ç•¥
  strategies: [
    'preload-critical-resources',
    'code-splitting',
    'lazy-loading',
    'service-worker-caching'
  ]
};

// Next.jsé…ç½®ä¼˜åŒ–
const nextConfig = {
  images: {
    formats: ['image/webp', 'image/avif'],
    sizes: '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw',
  },
  
  // ä»£ç æ‹†åˆ†
  experimental: {
    optimizeCss: true,
    optimizePackageImports: ['react-icons']
  },
  
  // å‹ç¼©é…ç½®
  compress: true,
  
  // ç¼“å­˜å¤´
  async headers() {
    return [
      {
        source: '/static/(.*)',
        headers: [
          {
            key: 'Cache-Control',
            value: 'public, max-age=31536000, immutable'
          }
        ]
      }
    ];
  }
};
```

---

# 6. éƒ¨ç½²æŒ‡å—å’Œè¿ç»´

## 6.1 éƒ¨ç½²æ–¹æ¡ˆ

### 6.1.1 é¡¹ç›®ç»“æ„

```
defix-aggregator/
â”œâ”€â”€ ğŸ“ components/              # Reactç»„ä»¶
â”‚   â”œâ”€â”€ PoolTable.tsx
â”‚   â”œâ”€â”€ FilterPanel.tsx
â”‚   â””â”€â”€ SearchBar.tsx
â”œâ”€â”€ ğŸ“ pages/                   # Next.jsé¡µé¢
â”‚   â”œâ”€â”€ index.tsx              # é¦–é¡µ
â”‚   â”œâ”€â”€ request.tsx            # æäº¤è¯·æ±‚é¡µé¢
â”‚   â”œâ”€â”€ reports/
â”‚   â”‚   â”œâ”€â”€ research/[nickname].tsx
â”‚   â”‚   â””â”€â”€ analysis/[nickname].tsx
â”‚   â””â”€â”€ api/                   # APIè·¯ç”±
â”œâ”€â”€ ğŸ“ lib/                    # å·¥å…·åº“
â”‚   â”œâ”€â”€ dataLoader.ts         # æ•°æ®åŠ è½½å™¨
â”‚   â”œâ”€â”€ supabase.ts           # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ utils.ts              # å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“ web3/                   # æ•°æ®æ–‡ä»¶ (Git Submodule)
â”‚   â”œâ”€â”€ pools/
â”‚   â””â”€â”€ protocol/
â”œâ”€â”€ ğŸ“ public/                 # é™æ€èµ„æº
â”œâ”€â”€ ğŸ“„ next.config.js          # Next.jsé…ç½®
â”œâ”€â”€ ğŸ“„ package.json            # ä¾èµ–ç®¡ç†
â””â”€â”€ ğŸ“„ .env.example           # ç¯å¢ƒå˜é‡æ¨¡æ¿
```

### 6.1.2 ç¯å¢ƒé…ç½®

```bash
# .env.example
# åŸºç¡€é…ç½®
NEXT_PUBLIC_SITE_URL=https://yoursite.com
NEXT_PUBLIC_SITE_NAME=DeFiæ”¶ç›Šæ± èšåˆå¹³å°

# Supabaseé…ç½®
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# å¯é€‰ï¼šé‚®ä»¶é€šçŸ¥é…ç½®
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password

# å¼€å‘æ¨¡å¼é…ç½®
NODE_ENV=development
```

## 6.2 Verceléƒ¨ç½² (æ¨è)

### 6.2.1 Vercelé…ç½®

```json
// vercel.json
{
  "version": 2,
  "name": "defix-aggregator",
  "builds": [
    {
      "src": "next.config.js",
      "use": "@vercel/next"
    }
  ],
  "routes": [
    {
      "src": "/web3/(.*)",
      "dest": "/web3/$1",
      "headers": {
        "cache-control": "s-maxage=3600, stale-while-revalidate"
      }
    }
  ],
  "functions": {
    "pages/api/**/*.ts": {
      "maxDuration": 30
    }
  },
  "env": {
    "NEXT_PUBLIC_SITE_URL": "https://your-project.vercel.app"
  }
}
```

### 6.2.2 GitHub Actionså·¥ä½œæµ

```yaml
# .github/workflows/deploy.yml
name: Deploy to Vercel

on:
  push:
    branches: [ main ]
    paths:
      - 'web3/**'
      - 'src/**'
      - 'pages/**'
      - 'components/**'
  
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      with:
        submodules: recursive
        token: ${{ secrets.GITHUB_TOKEN }}
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Build project
      run: npm run build
      env:
        NEXT_PUBLIC_SITE_URL: ${{ secrets.SITE_URL }}
        NEXT_PUBLIC_SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
        NEXT_PUBLIC_SUPABASE_ANON_KEY: ${{ secrets.SUPABASE_ANON_KEY }}
    
    - name: Deploy to Vercel
      uses: vercel/action@v28
      with:
        vercel-token: ${{ secrets.VERCEL_TOKEN }}
        vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
        vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
        vercel-args: '--prod'
```

## 6.3 è‡ªæœ‰æœåŠ¡å™¨éƒ¨ç½²

### 6.3.1 éƒ¨ç½²è„šæœ¬

```bash
#!/bin/bash
# deploy-server.sh

set -e

# é…ç½®å˜é‡
PROJECT_DIR="/var/www/defix-aggregator"
BACKUP_DIR="/var/backups/defix-aggregator"
WEB3_DATA_DIR="/var/www/defix-aggregator/web3"
PM2_APP_NAME="defix-aggregator"

echo "ğŸš€ å¼€å§‹éƒ¨ç½² DeFi æ”¶ç›Šæ± èšåˆå¹³å°..."

# 1. åˆ›å»ºå¤‡ä»½
if [ -d "$PROJECT_DIR" ]; then
    echo "ğŸ“¦ åˆ›å»ºå¤‡ä»½..."
    sudo mkdir -p $BACKUP_DIR
    sudo cp -r $PROJECT_DIR "$BACKUP_DIR/backup-$(date +%Y%m%d-%H%M%S)"
fi

# 2. æ›´æ–°ä»£ç 
echo "ğŸ“¥ æ›´æ–°åº”ç”¨ä»£ç ..."
cd $PROJECT_DIR
git pull origin main

# 3. æ›´æ–°web3æ•°æ®
echo "ğŸ“Š æ›´æ–°web3æ•°æ®..."
if [ -d "$WEB3_DATA_DIR/.git" ]; then
    cd $WEB3_DATA_DIR
    git pull origin main
    cd $PROJECT_DIR
fi

# 4. å®‰è£…ä¾èµ–
echo "ğŸ“š å®‰è£…ä¾èµ–..."
npm ci --production

# 5. æ„å»ºåº”ç”¨
echo "ğŸ”¨ æ„å»ºåº”ç”¨..."
npm run build

# 6. é‡å¯æœåŠ¡
echo "ğŸ”„ é‡å¯æœåŠ¡..."
pm2 restart $PM2_APP_NAME || pm2 start npm --name $PM2_APP_NAME -- start

# 7. å¥åº·æ£€æŸ¥
echo "ğŸ¥ å¥åº·æ£€æŸ¥..."
sleep 5
if curl -f http://localhost:3000/api/health; then
    echo "âœ… éƒ¨ç½²æˆåŠŸï¼"
else
    echo "âŒ éƒ¨ç½²å¤±è´¥ï¼Œå›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬..."
    exit 1
fi

echo "ğŸ‰ éƒ¨ç½²å®Œæˆï¼"
```

### 6.3.2 Nginxé…ç½®

```nginx
# nginx.conf
server {
    listen 80;
    server_name yoursite.com www.yoursite.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name yoursite.com www.yoursite.com;
    
    # SSLé…ç½®
    ssl_certificate /etc/ssl/certs/yoursite.com.crt;
    ssl_certificate_key /etc/ssl/private/yoursite.com.key;
    
    # å®‰å…¨å¤´
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    
    # ä¸»åº”ç”¨ä»£ç†
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
    
    # é™æ€æ–‡ä»¶ç¼“å­˜
    location /static/ {
        root /var/www/defix-aggregator/public;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # Web3æ•°æ®æ–‡ä»¶ç›´æ¥æœåŠ¡
    location /web3/ {
        root /var/www/defix-aggregator;
        expires 1h;
        add_header Cache-Control "public";
        
        location ~* \.md$ {
            add_header Content-Type "text/markdown; charset=utf-8";
        }
        
        location ~* \.html$ {
            add_header Content-Type "text/html; charset=utf-8";
        }
    }
    
    # Gzipå‹ç¼©
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml text/javascript;
}
```

## 6.4 ç›‘æ§å’Œè¿ç»´

### 6.4.1 ç›‘æ§æŒ‡æ ‡

```typescript
// ç›‘æ§æŒ‡æ ‡å®šä¹‰
interface MonitoringMetrics {
  // æ€§èƒ½æŒ‡æ ‡
  performance: {
    responseTime: number;      // å“åº”æ—¶é—´
    throughput: number;        // ååé‡
    errorRate: number;         // é”™è¯¯ç‡
    uptime: number;           // æ­£å¸¸è¿è¡Œæ—¶é—´
  };
  
  // èµ„æºæŒ‡æ ‡
  resources: {
    cpuUsage: number;         // CPUä½¿ç”¨ç‡
    memoryUsage: number;      // å†…å­˜ä½¿ç”¨ç‡
    diskUsage: number;        // ç£ç›˜ä½¿ç”¨ç‡
    networkIO: number;        // ç½‘ç»œIO
  };
  
  // ä¸šåŠ¡æŒ‡æ ‡
  business: {
    dailyActiveUsers: number;  // æ—¥æ´»ç”¨æˆ·
    pageViews: number;        // é¡µé¢æµè§ˆé‡
    apiCalls: number;         // APIè°ƒç”¨æ¬¡æ•°
    errorRequests: number;    // é”™è¯¯è¯·æ±‚æ•°
  };
}
```

### 6.4.2 æ—¥å¿—ç®¡ç†

```typescript
// æ—¥å¿—é…ç½®
const logConfig = {
  level: process.env.NODE_ENV === 'production' ? 'info' : 'debug',
  format: 'json',
  outputs: [
    {
      type: 'console',
      colorize: process.env.NODE_ENV !== 'production'
    },
    {
      type: 'file',
      filename: 'logs/app.log',
      maxsize: 10 * 1024 * 1024, // 10MB
      maxFiles: 5
    }
  ]
};

// æ—¥å¿—è®°å½•ç¤ºä¾‹
logger.info('Pool data loaded', {
  poolCount: pools.length,
  loadTime: Date.now() - startTime,
  source: 'DataLoader'
});

logger.error('Failed to load pool data', {
  error: error.message,
  stack: error.stack,
  source: 'DataLoader'
});
```

### 6.4.3 å¤‡ä»½ç­–ç•¥

```bash
#!/bin/bash
# backup.sh - æ•°æ®å¤‡ä»½è„šæœ¬

BACKUP_DIR="/var/backups/defix-aggregator"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)

# 1. å¤‡ä»½web3æ•°æ®æ–‡ä»¶
echo "ğŸ“ å¤‡ä»½web3æ•°æ®æ–‡ä»¶..."
tar -czf "$BACKUP_DIR/web3_data_$TIMESTAMP.tar.gz" web3/

# 2. å¤‡ä»½Supabaseæ•°æ®
echo "ğŸ—„ï¸ å¤‡ä»½æ•°æ®åº“..."
pg_dump $DATABASE_URL > "$BACKUP_DIR/database_$TIMESTAMP.sql"

# 3. å¤‡ä»½åº”ç”¨é…ç½®
echo "âš™ï¸ å¤‡ä»½é…ç½®æ–‡ä»¶..."
cp .env "$BACKUP_DIR/env_$TIMESTAMP"
cp next.config.js "$BACKUP_DIR/config_$TIMESTAMP.js"

# 4. æ¸…ç†æ—§å¤‡ä»½ (ä¿ç•™30å¤©)
find $BACKUP_DIR -name "*.tar.gz" -mtime +30 -delete
find $BACKUP_DIR -name "*.sql" -mtime +30 -delete

echo "âœ… å¤‡ä»½å®Œæˆ"
```

---

# 7. å¼€å‘æŒ‡å—å’Œä»£ç è§„èŒƒ

## 7.1 å¼€å‘ç¯å¢ƒè®¾ç½®

### 7.1.1 ç¯å¢ƒè¦æ±‚

```json
{
  "node": ">=18.0.0",
  "npm": ">=8.0.0",
  "git": ">=2.30.0"
}
```

### 7.1.2 å¼€å‘å·¥å…·é…ç½®

```json
// .vscode/settings.json
{
  "typescript.preferences.importModuleSpecifier": "relative",
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "files.associations": {
    "*.md": "markdown"
  }
}
```

### 7.1.3 Gité…ç½®

```bash
# .gitignore
# Dependencies
node_modules/
npm-debug.log*

# Build outputs
.next/
out/
build/

# Environment files
.env
.env.local
.env.production

# Logs
logs/
*.log

# Cache
.cache/
.vercel/

# IDE
.vscode/
.idea/

# OS
.DS_Store
Thumbs.db
```

## 7.2 ä»£ç è§„èŒƒ

### 7.2.1 TypeScripté…ç½®

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "es5",
    "lib": ["dom", "dom.iterable", "es6"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"],
      "@/components/*": ["components/*"],
      "@/lib/*": ["lib/*"],
      "@/types/*": ["types/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx"],
  "exclude": ["node_modules"]
}
```

### 7.2.2 ESLinté…ç½®

```json
// .eslintrc.json
{
  "extends": [
    "next/core-web-vitals",
    "@typescript-eslint/recommended"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/no-explicit-any": "warn",
    "prefer-const": "error",
    "no-var": "error",
    "no-console": "warn",
    "react-hooks/exhaustive-deps": "warn"
  }
}
```

### 7.2.3 Prettieré…ç½®

```json
// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false
}
```

## 7.3 å¼€å‘æµç¨‹

### 7.3.1 å¼€å‘è„šæœ¬

```json
// package.json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "lint:fix": "next lint --fix",
    "type-check": "tsc --noEmit",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    
    // æ•°æ®ç®¡ç†è„šæœ¬
    "data:sync": "git submodule update --remote web3",
    "data:validate": "node scripts/validate-data.js",
    "data:generate-sitemap": "node scripts/generate-sitemap.js",
    
    // éƒ¨ç½²è„šæœ¬
    "deploy:vercel": "vercel --prod",
    "deploy:server": "./scripts/deploy-server.sh",
    "deploy:static": "npm run build && npm run export"
  }
}
```

### 7.3.2 Gitå·¥ä½œæµ

```bash
# 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/pool-filter-enhancement

# 2. å¼€å‘å’Œæäº¤
git add .
git commit -m "feat: add advanced pool filtering options

- Add multi-select chain filter
- Add APR range slider
- Add token type filter
- Update UI components for better UX"

# 3. æ¨é€å’Œåˆ›å»ºPR
git push origin feature/pool-filter-enhancement
# åœ¨GitHubåˆ›å»ºPull Request

# 4. ä»£ç å®¡æŸ¥é€šè¿‡ååˆå¹¶
git checkout main
git pull origin main
git branch -d feature/pool-filter-enhancement
```

### 7.3.3 æäº¤ä¿¡æ¯è§„èŒƒ

```bash
# æäº¤ä¿¡æ¯æ ¼å¼
<type>(<scope>): <subject>

<body>

<footer>

# ç±»å‹è¯´æ˜
feat:     æ–°åŠŸèƒ½
fix:      ä¿®å¤bug
docs:     æ–‡æ¡£æ›´æ–°
style:    ä»£ç æ ¼å¼(ä¸å½±å“åŠŸèƒ½)
refactor: é‡æ„
test:     æµ‹è¯•ç›¸å…³
chore:    æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

# ç¤ºä¾‹
feat(pool): add risk level filtering

Add multi-select risk level filter to pool table.
Users can now filter pools by Low, Medium, High, and Very High risk levels.

Closes #123
```

## 7.4 æµ‹è¯•ç­–ç•¥

### 7.4.1 æµ‹è¯•é…ç½®

```javascript
// jest.config.js
const nextJest = require('next/jest');

const createJestConfig = nextJest({
  dir: './',
});

const customJestConfig = {
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],
  moduleNameMapping: {
    '^@/components/(.*)$': '<rootDir>/components/$1',
    '^@/lib/(.*)$': '<rootDir>/lib/$1',
  },
  testEnvironment: 'jest-environment-jsdom',
  collectCoverageFrom: [
    'components/**/*.{js,jsx,ts,tsx}',
    'lib/**/*.{js,jsx,ts,tsx}',
    'pages/**/*.{js,jsx,ts,tsx}',
    '!**/*.d.ts',
  ],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80,
    },
  },
};

module.exports = createJestConfig(customJestConfig);
```

### 7.4.2 å•å…ƒæµ‹è¯•ç¤ºä¾‹

```typescript
// __tests__/lib/dataLoader.test.ts
import { DataLoader } from '../../lib/dataLoader';
import fs from 'fs/promises';

jest.mock('fs/promises');

describe('DataLoader', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  describe('parsePoolFile', () => {
    it('should parse pool file correctly', async () => {
      const mockFileContent = `---
Protocol: "[[Tapp Exchange]]" 
Type: StableLP
Chain:
  - Aptos
Risk: ä¸­é£é™©
Token: APT
APR-Low: 0.15
APR-High: 0.3
Market:
  - é€šç”¨
---`;

      (fs.readFile as jest.Mock).mockResolvedValue(mockFileContent);

      const result = await DataLoader.parsePoolFile('test.md');

      expect(result).toMatchObject({
        id: 'test',
        name: 'test',
        type: 'StableLP',
        chain: ['Aptos'],
        risk: 'ä¸­é£é™©',
        token: 'APT',
        aprRange: {
          low: 0.15,
          high: 0.3,
        },
      });
    });

    it('should handle file read error', async () => {
      (fs.readFile as jest.Mock).mockRejectedValue(new Error('File not found'));

      await expect(DataLoader.parsePoolFile('nonexistent.md')).rejects.toThrow(
        'File not found'
      );
    });
  });
});
```

### 7.4.3 é›†æˆæµ‹è¯•ç¤ºä¾‹

```typescript
// __tests__/api/pools.test.ts
import { createMocks } from 'node-mocks-http';
import handler from '../../pages/api/pools';

describe('/api/pools', () => {
  it('should return pools list', async () => {
    const { req, res } = createMocks({
      method: 'GET',
      query: {
        page: '1',
        limit: '10',
      },
    });

    await handler(req, res);

    expect(res._getStatusCode()).toBe(200);
    
    const data = JSON.parse(res._getData());
    expect(data).toHaveProperty('pools');
    expect(data).toHaveProperty('total');
    expect(data).toHaveProperty('page', 1);
    expect(data).toHaveProperty('limit', 10);
    expect(Array.isArray(data.pools)).toBe(true);
  });

  it('should handle search filter', async () => {
    const { req, res } = createMocks({
      method: 'GET',
      query: {
        search: 'Tapp',
      },
    });

    await handler(req, res);

    expect(res._getStatusCode()).toBe(200);
    
    const data = JSON.parse(res._getData());
    data.pools.forEach(pool => {
      expect(
        pool.name.toLowerCase().includes('tapp') ||
        pool.protocol.name.toLowerCase().includes('tapp')
      ).toBe(true);
    });
  });
});
```

## 7.5 æ€§èƒ½ä¼˜åŒ–

### 7.5.1 ä»£ç åˆ†å‰²

```typescript
// åŠ¨æ€å¯¼å…¥ç»„ä»¶
import dynamic from 'next/dynamic';

const FilterPanel = dynamic(() => import('../components/FilterPanel'), {
  loading: () => <FilterPanelSkeleton />,
  ssr: false, // å®¢æˆ·ç«¯æ¸²æŸ“
});

const AdvancedSearch = dynamic(
  () => import('../components/AdvancedSearch'),
  { ssr: false }
);
```

### 7.5.2 å›¾ç‰‡ä¼˜åŒ–

```tsx
import Image from 'next/image';

const ProtocolLogo: React.FC<{ protocol: Protocol }> = ({ protocol }) => {
  return (
    <Image
      src={`/logos/${protocol.nickname}.png`}
      alt={`${protocol.name} logo`}
      width={32}
      height={32}
      placeholder="blur"
      blurDataURL="data:image/jpeg;base64,..."
      sizes="(max-width: 768px) 24px, 32px"
    />
  );
};
```

### 7.5.3 ç¼“å­˜ä¼˜åŒ–

```typescript
// ReactæŸ¥è¯¢ç¼“å­˜
import { useQuery } from '@tanstack/react-query';

const usePoolsData = (filters: FilterParams) => {
  return useQuery({
    queryKey: ['pools', filters],
    queryFn: () => fetchPools(filters),
    staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿ
    cacheTime: 10 * 60 * 1000, // 10åˆ†é’Ÿ
    refetchOnWindowFocus: false,
  });
};
```

---

# 8. ç”¨æˆ·æ‰‹å†Œå’ŒFAQ

## 8.1 ç”¨æˆ·ä½¿ç”¨æŒ‡å—

### 8.1.1 å¿«é€Ÿå¼€å§‹

**è®¿é—®ç½‘ç«™**
1. åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ï¼š`https://yoursite.com`
2. ç³»ç»Ÿå°†è‡ªåŠ¨åŠ è½½æœ€æ–°çš„æ”¶ç›Šæ± ä¿¡æ¯

**æµè§ˆæ”¶ç›Šæ± **
1. é¦–é¡µå±•ç¤ºäº†æ‰€æœ‰å·²æ”¶å½•çš„DeFiæ”¶ç›Šæ± ä¿¡æ¯
2. æ¯ä¸ªæ”¶ç›Šæ± æ˜¾ç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š
   - æ”¶ç›Šæ± åç§°
   - æ‰€å±åè®®å’Œå®˜ç½‘é“¾æ¥
   - æŠ•èµ„ç±»å‹å’Œæ‰€å±åŒºå—é“¾
   - é£é™©ç­‰çº§å’ŒTokenç±»å‹
   - APRæ”¶ç›ŠèŒƒå›´
   - é€‚ç”¨å¸‚åœºç±»å‹
   - è°ƒç ”æŠ¥å‘Šå’Œåˆ†ææŠ¥å‘Šé“¾æ¥

### 8.1.2 æœç´¢å’Œè¿‡æ»¤

**æ–‡æœ¬æœç´¢**
- åœ¨æœç´¢æ¡†ä¸­è¾“å…¥æ”¶ç›Šæ± åç§°æˆ–åè®®åç§°
- ç³»ç»Ÿæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼Œä¼šå®æ—¶æ˜¾ç¤ºæœç´¢ç»“æœ

**é«˜çº§è¿‡æ»¤**
1. **åŒºå—é“¾è¿‡æ»¤**: é€‰æ‹©æ„Ÿå…´è¶£çš„åŒºå—é“¾ç½‘ç»œ
2. **é£é™©ç­‰çº§**: æ ¹æ®é£é™©åå¥½é€‰æ‹©ä½/ä¸­/é«˜/æé«˜é£é™©
3. **æŠ•èµ„ç±»å‹**: é€‰æ‹©StableLPã€Futureç­‰æŠ•èµ„ç±»å‹
4. **Tokenè¿‡æ»¤**: æŒ‰ç‰¹å®šTokenç±»å‹ç­›é€‰
5. **APRèŒƒå›´**: ä½¿ç”¨æ»‘å—è®¾ç½®æœŸæœ›çš„æ”¶ç›Šç‡èŒƒå›´

**æ’åºåŠŸèƒ½** - å¤šå­—æ®µç»„åˆæ’åºç³»ç»Ÿ
- **é«˜æ”¶ç›Šæ’åº**ï¼šæŒ‰APRæœ€é«˜å€¼æ’åºï¼Œé€‚åˆå¯»æ‰¾é«˜æ”¶ç›Šæœºä¼š
- **ä½æ”¶ç›Šæ’åº**ï¼šæŒ‰APRæœ€ä½å€¼æ’åºï¼Œè¯„ä¼°æ”¶ç›Šä¸‹é™é£é™©
- **é£é™©æ’åº**ï¼šæŒ‰é£é™©ç­‰çº§æ’åºï¼ˆä½â†’ä¸­â†’é«˜â†’æé«˜ï¼‰
- **ç»„åˆæ’åº**ï¼šæ”¯æŒå¤šå­—æ®µç»„åˆï¼Œå¦‚"é£é™©é™åº+é«˜æ”¶ç›Šé™åº"
- **æ’åºä¼˜å…ˆçº§**ï¼šå¤šå­—æ®µæ—¶æ˜¾ç¤ºæ•°å­—æ ‡è¯†æ’åºä¼˜å…ˆçº§
- **ä¸€é”®æ¸…ç©º**ï¼šå¯å¿«é€Ÿæ¸…é™¤æ‰€æœ‰æ’åºæ¡ä»¶

**å¸¸ç”¨æ’åºç»„åˆ**ï¼š
- é«˜é£é™©é«˜æ”¶ç›Šç­–ç•¥ï¼šé£é™©é™åº + é«˜æ”¶ç›Šé™åº
- ç¨³å¥æŠ•èµ„ç­–ç•¥ï¼šé£é™©å‡åº + ä½æ”¶ç›Šå‡åº  
- æ”¶ç›Šä¼˜å…ˆç­–ç•¥ï¼šé«˜æ”¶ç›Šé™åº + é£é™©å‡åº

### 8.1.3 æŸ¥çœ‹æŠ¥å‘Š

**è°ƒç ”æŠ¥å‘Š**
- ç‚¹å‡»"æŸ¥çœ‹æŠ¥å‘Š"é“¾æ¥æŸ¥çœ‹è¯¦ç»†çš„Markdownæ ¼å¼è°ƒç ”æŠ¥å‘Š
- æŠ¥å‘ŠåŒ…å«é¡¹ç›®æ¦‚è¿°ã€å¸‚åœºåˆ†æã€é£é™©è¯„ä¼°ç­‰ä¸“ä¸šå†…å®¹
- å¦‚æ˜¾ç¤º"æš‚æœªå‘å¸ƒ"ï¼Œè¡¨ç¤ºè¯¥æŠ¥å‘Šæ­£åœ¨åˆ¶ä½œä¸­

**åˆ†ææŠ¥å‘Š**  
- ç‚¹å‡»"æŸ¥çœ‹åˆ†æ"é“¾æ¥**ç›´æ¥æ‰“å¼€**å®Œæ•´äº¤äº’å¼HTMLåˆ†ææŠ¥å‘Š
- æŠ¥å‘ŠåŒ…å«Chart.jså›¾è¡¨ã€åŠ¨ç”»æ•ˆæœã€ç”¨æˆ·äº¤äº’å¡ç‰‡ç­‰ä¸°å¯Œå†…å®¹
- åœ¨æ–°æ ‡ç­¾é¡µä¸­ä»¥å®Œæ•´HTMLæ ¼å¼å‘ˆç°ï¼Œä¿æŒæ‰€æœ‰JavaScriptåŠŸèƒ½
- **æ— ä¸­é—´é¡µé¢**ï¼Œä¸€é”®è·å¾—å®Œæ•´äº¤äº’ä½“éªŒ

### 8.1.4 æäº¤æ”¶å½•è¯·æ±‚

**æäº¤æ–°è¯·æ±‚**
1. ç‚¹å‡»é¡µé¢åº•éƒ¨çš„"æäº¤æ”¶å½•è¯·æ±‚"æŒ‰é’®
2. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   - æ”¶ç›Šæ± åç§°ï¼ˆå¿…å¡«ï¼‰
   - åè®®åç§°ï¼ˆå¿…å¡«ï¼‰  
   - è¯¦ç»†æè¿°ï¼ˆå¿…å¡«ï¼‰ï¼šåŒ…æ‹¬æ”¶ç›Šæœºåˆ¶ã€é£é™©ç‰¹ç‚¹ç­‰
   - è”ç³»é‚®ç®±ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºæ¥æ”¶å¤„ç†ç»“æœé€šçŸ¥

**å¤„ç†æµç¨‹**
1. æäº¤åç³»ç»Ÿä¼šæ˜¾ç¤ºæˆåŠŸæç¤º
2. ç ”ç©¶å›¢é˜Ÿå°†è¯„ä¼°è¯·æ±‚çš„ä¼˜å…ˆçº§
3. é€šè¿‡DeFi Research Agentè¿›è¡Œæ·±åº¦è°ƒç ”
4. ç”Ÿæˆè°ƒç ”æŠ¥å‘Šå’Œåˆ†ææŠ¥å‘Šåå‘å¸ƒåˆ°ç½‘ç«™

## 8.2 å¸¸è§é—®é¢˜è§£ç­”

### 8.2.1 åŸºç¡€ä½¿ç”¨é—®é¢˜

**Q: ç½‘ç«™çš„æ•°æ®å¤šä¹…æ›´æ–°ä¸€æ¬¡ï¼Ÿ**
A: ç½‘ç«™æ•°æ®åŸºäºæ–‡ä»¶ç³»ç»Ÿå®æ—¶æ›´æ–°ã€‚å½“æœ‰æ–°çš„æ”¶ç›Šæ± æˆ–æŠ¥å‘Šå‘å¸ƒæ—¶ï¼Œé¡µé¢ä¼šåœ¨1å°æ—¶å†…è‡ªåŠ¨æ›´æ–°ã€‚

**Q: ä¸ºä»€ä¹ˆæœ‰äº›æ”¶ç›Šæ± æ²¡æœ‰è°ƒç ”æŠ¥å‘Šï¼Ÿ**
A: è°ƒç ”æŠ¥å‘Šéœ€è¦ä¸“ä¸šå›¢é˜Ÿæ·±åº¦ç ”ç©¶åˆ¶ä½œï¼Œæˆ‘ä»¬ä¼˜å…ˆå¤„ç†ç”¨æˆ·è¯·æ±‚è¾ƒå¤šå’Œå¸‚åœºçƒ­åº¦è¾ƒé«˜çš„é¡¹ç›®ã€‚æ‚¨å¯ä»¥é€šè¿‡"æäº¤æ”¶å½•è¯·æ±‚"åŠŸèƒ½ç”³è¯·åˆ¶ä½œç‰¹å®šé¡¹ç›®çš„æŠ¥å‘Šã€‚

**Q: å¦‚ä½•ç†è§£é£é™©ç­‰çº§ï¼Ÿ**
A: é£é™©ç­‰çº§åˆ’åˆ†å¦‚ä¸‹ï¼š
- **ä½é£é™©**: æˆç†Ÿåè®®ï¼Œæœºåˆ¶ç®€å•ï¼Œå†å²ç¨³å®š
- **ä¸­é£é™©**: åè®®è¾ƒä¸ºæˆç†Ÿï¼Œå­˜åœ¨ä¸€å®šå¤æ‚æ€§
- **é«˜é£é™©**: æ–°å…´åè®®æˆ–å¤æ‚æœºåˆ¶ï¼Œéœ€è°¨æ…è¯„ä¼°
- **æé«˜é£é™©**: å®éªŒæ€§é¡¹ç›®ï¼Œå­˜åœ¨è¾ƒå¤§ä¸ç¡®å®šæ€§

**Q: APRæ”¶ç›ŠèŒƒå›´æ˜¯å¦å‡†ç¡®ï¼Ÿ**
A: APRèŒƒå›´åŸºäºå†å²æ•°æ®å’Œåè®®æœºåˆ¶åˆ†æå¾—å‡ºï¼Œä»…ä¾›å‚è€ƒã€‚å®é™…æ”¶ç›Šä¼šå› å¸‚åœºæ¡ä»¶ã€æµåŠ¨æ€§å˜åŒ–ç­‰å› ç´ æ³¢åŠ¨ï¼ŒæŠ•èµ„å‰è¯·åšå¥½é£é™©è¯„ä¼°ã€‚

### 8.2.2 æŠ€æœ¯é—®é¢˜

**Q: ç½‘ç«™åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šèƒ½æ­£å¸¸ä½¿ç”¨å—ï¼Ÿ**
A: æ˜¯çš„ï¼Œç½‘ç«™é‡‡ç”¨å“åº”å¼è®¾è®¡ï¼Œå®Œå…¨é€‚é…æ‰‹æœºå’Œå¹³æ¿è®¾å¤‡ã€‚åœ¨ç§»åŠ¨ç«¯ä¼šè‡ªåŠ¨è°ƒæ•´å¸ƒå±€ä»¥æä¾›æœ€ä½³æµè§ˆä½“éªŒã€‚

**Q: ä¸ºä»€ä¹ˆæœ‰æ—¶é¡µé¢åŠ è½½è¾ƒæ…¢ï¼Ÿ**
A: å¯èƒ½çš„åŸå› åŒ…æ‹¬ï¼š
- ç½‘ç»œè¿æ¥ä¸ç¨³å®š
- é¦–æ¬¡è®¿é—®éœ€è¦åŠ è½½è¾ƒå¤šæ•°æ®
- æœåŠ¡å™¨æ­£åœ¨æ›´æ–°æ•°æ®
å»ºè®®åˆ·æ–°é¡µé¢é‡è¯•ï¼Œæˆ–ç¨åå†æ¬¡è®¿é—®ã€‚

**Q: æŠ¥å‘Šé¡µé¢æ˜¾ç¤º404é”™è¯¯æ€ä¹ˆåŠï¼Ÿ**
A: è¿™é€šå¸¸è¡¨ç¤ºæŠ¥å‘Šæ–‡ä»¶æš‚æœªç”Ÿæˆã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨3ç§’åè·³è½¬åˆ°é¦–é¡µã€‚æ‚¨å¯ä»¥ï¼š
- ç¨åå†æ¬¡å°è¯•è®¿é—®
- æŸ¥çœ‹é¦–é¡µç¡®è®¤è¯¥é¡¹ç›®æ˜¯å¦å·²æœ‰å…¶ä»–ç±»å‹çš„æŠ¥å‘Š
- æäº¤æ”¶å½•è¯·æ±‚ç”³è¯·åˆ¶ä½œç›¸å…³æŠ¥å‘Š

### 8.2.3 å†…å®¹ç›¸å…³é—®é¢˜

**Q: è°ƒç ”æŠ¥å‘Šçš„å†…å®¹åŒ…æ‹¬å“ªäº›ï¼Ÿ**
A: è°ƒç ”æŠ¥å‘ŠåŸºäºDeFi Research Agentçš„å…¨é¢åˆ†æï¼ŒåŒ…æ‹¬ï¼š
- é¡¹ç›®æ¦‚è¿°å’ŒåŸºæœ¬ä¿¡æ¯
- å¸‚åœºæ•°æ®å’Œè¡¨ç°åˆ†æ
- æŠ€æœ¯æ¶æ„å’Œå®‰å…¨å®¡è®¡
- é£é™©è¯„ä¼°å’Œå†å²äº‹ä»¶
- ç¤¾åŒºåˆ†æå’Œèˆ†æƒ…ç›‘æ§
- æŠ•èµ„å»ºè®®å’Œç­‰çº§è¯„å®š

**Q: å¦‚ä½•åˆ¤æ–­æŠ•èµ„å»ºè®®çš„å¯é æ€§ï¼Ÿ**
A: æˆ‘ä»¬çš„æŠ•èµ„å»ºè®®åŸºäºï¼š
- æœ€æ–°çš„å¸‚åœºæ•°æ®å’Œé¡¹ç›®ä¿¡æ¯
- ä¸“ä¸šçš„é£é™©è¯„ä¼°æ–¹æ³•
- å†å²è¡¨ç°å’Œè¡Œä¸šå¯¹æ¯”
- å¤šç»´åº¦çš„å®šé‡å’Œå®šæ€§åˆ†æ
ä½†è¯·æ³¨æ„ï¼Œæ‰€æœ‰å»ºè®®ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ï¼ŒæŠ•èµ„å†³ç­–éœ€è‡ªè¡Œæ‰¿æ‹…é£é™©ã€‚

**Q: å¯ä»¥ç›¸ä¿¡ç½‘ç«™ä¸Šçš„æ”¶ç›Šé¢„æœŸå—ï¼Ÿ**
A: ç½‘ç«™æ˜¾ç¤ºçš„APRèŒƒå›´åŸºäºå†å²æ•°æ®å’Œåè®®åˆ†æï¼Œä½†DeFiæ”¶ç›Šå…·æœ‰é«˜åº¦æ³¢åŠ¨æ€§ã€‚å®é™…æ”¶ç›Šå—å¤šç§å› ç´ å½±å“ï¼š
- å¸‚åœºæµåŠ¨æ€§å˜åŒ–
- åè®®å‚æ•°è°ƒæ•´  
- ä»£å¸ä»·æ ¼æ³¢åŠ¨
- ç½‘ç»œè´¹ç”¨å˜åŒ–
è¯·å°†å…¶ä½œä¸ºå‚è€ƒæŒ‡æ ‡ï¼Œè€Œéç¡®å®šé¢„æœŸã€‚

### 8.2.4 è´¦æˆ·å’Œåé¦ˆ

**Q: ç½‘ç«™éœ€è¦æ³¨å†Œè´¦æˆ·å—ï¼Ÿ**
A: ä¸éœ€è¦ã€‚ç½‘ç«™å®Œå…¨å¼€æ”¾è®¿é—®ï¼Œæ— éœ€æ³¨å†Œå³å¯æµè§ˆæ‰€æœ‰å†…å®¹ã€‚æäº¤æ”¶å½•è¯·æ±‚æ—¶é‚®ç®±ä¸ºå¯é€‰é¡¹ã€‚

**Q: å¦‚ä½•è”ç³»å›¢é˜Ÿåé¦ˆé—®é¢˜ï¼Ÿ**
A: æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š
- ä½¿ç”¨"æäº¤æ”¶å½•è¯·æ±‚"åŠŸèƒ½æè¿°é—®é¢˜
- å‘é€é‚®ä»¶åˆ°ï¼šfeedback@yoursite.com
- åœ¨æŠ¥å‘Šé¡µé¢ç‚¹å‡»"å‘ç°é—®é¢˜ï¼Ÿæäº¤åé¦ˆ"é“¾æ¥

**Q: å¦‚ä½•è·å–ç½‘ç«™æ›´æ–°é€šçŸ¥ï¼Ÿ**
A: ç›®å‰ç½‘ç«™ä¸æä¾›ä¸»åŠ¨é€šçŸ¥æœåŠ¡ã€‚å»ºè®®ï¼š
- æ”¶è—ç½‘ç«™å®šæœŸè®¿é—®
- å…³æ³¨æˆ‘ä»¬çš„å®˜æ–¹ç¤¾äº¤åª’ä½“è´¦å·
- åœ¨æäº¤è¯·æ±‚æ—¶ç•™ä¸‹é‚®ç®±æ¥æ”¶å¤„ç†é€šçŸ¥

### 8.2.5 æ•°æ®å‡†ç¡®æ€§

**Q: ç½‘ç«™æ•°æ®çš„æ¥æºæ˜¯ä»€ä¹ˆï¼Ÿ**
A: æˆ‘ä»¬çš„æ•°æ®æ¥æºåŒ…æ‹¬ï¼š
- é¡¹ç›®å®˜æ–¹æ–‡æ¡£å’Œå…¬å‘Š
- DefiLlamaç­‰ä¸“ä¸šæ•°æ®å¹³å°
- åŒºå—é“¾ä¸Šçš„çœŸå®äº¤æ˜“æ•°æ®
- ä¸“ä¸šç ”ç©¶å›¢é˜Ÿçš„å®åœ°è°ƒç ”
- ç¤¾åŒºåé¦ˆå’Œç”¨æˆ·æŠ¥å‘Š

**Q: å‘ç°æ•°æ®é”™è¯¯å¦‚ä½•åé¦ˆï¼Ÿ**
A: å¦‚æœå‘ç°æ•°æ®é”™è¯¯ï¼Œè¯·ï¼š
1. è®°å½•å…·ä½“çš„é”™è¯¯å†…å®¹å’Œä½ç½®
2. é€šè¿‡"æäº¤æ”¶å½•è¯·æ±‚"åŠŸèƒ½è¯¦ç»†æè¿°é—®é¢˜
3. æä¾›æ­£ç¡®ä¿¡æ¯çš„æ¥æºé“¾æ¥
4. æˆ‘ä»¬ä¼šåœ¨24å°æ—¶å†…æ ¸å®å¹¶æ›´æ–°

**Q: ä¸ºä»€ä¹ˆåŒä¸€ä¸ªé¡¹ç›®åœ¨ä¸åŒç½‘ç«™ä¸Šçš„ä¿¡æ¯ä¸ä¸€è‡´ï¼Ÿ**
A: å¯èƒ½çš„åŸå› åŒ…æ‹¬ï¼š
- æ•°æ®æ›´æ–°æ—¶é—´ä¸åŒ
- ç»Ÿè®¡æ–¹æ³•å’Œç»´åº¦å·®å¼‚
- ä¿¡æ¯æ¥æºçš„å‡†ç¡®æ€§å·®å¼‚
- é¡¹ç›®å‚æ•°çš„å®æ—¶å˜åŒ–
æˆ‘ä»¬æŒç»­ä¼˜åŒ–æ•°æ®å‡†ç¡®æ€§ï¼Œå¦‚æœ‰ç–‘é—®è¯·ä»¥é¡¹ç›®å®˜æ–¹ä¿¡æ¯ä¸ºå‡†ã€‚

## 8.3 ä½¿ç”¨æŠ€å·§

### 8.3.1 é«˜æ•ˆæµè§ˆæŠ€å·§

**å¿«é€Ÿå®šä½æ„Ÿå…´è¶£çš„é¡¹ç›®**
1. ä½¿ç”¨ç»„åˆè¿‡æ»¤ï¼šåŒæ—¶è®¾ç½®é£é™©ç­‰çº§ã€åŒºå—é“¾å’ŒAPRèŒƒå›´
2. ä¼˜å…ˆæŸ¥çœ‹æœ‰å®Œæ•´æŠ¥å‘Šçš„é¡¹ç›®ï¼ˆè°ƒç ”æŠ¥å‘Š+åˆ†ææŠ¥å‘Šï¼‰
3. å…³æ³¨"é€‚ç”¨å¸‚åœº"å­—æ®µï¼Œé€‰æ‹©ç¬¦åˆå½“å‰å¸‚åœºç¯å¢ƒçš„ç­–ç•¥

**æ·±åº¦ç ”ç©¶æµç¨‹**
1. å…ˆæµè§ˆèšåˆè¡¨æ ¼äº†è§£åŸºæœ¬ä¿¡æ¯
2. é˜…è¯»è°ƒç ”æŠ¥å‘Šäº†è§£é¡¹ç›®è¯¦æƒ…
3. æŸ¥çœ‹åˆ†ææŠ¥å‘Šäº†è§£æ•°æ®è¡¨ç°
4. è®¿é—®é¡¹ç›®å®˜ç½‘ç¡®è®¤æœ€æ–°ä¿¡æ¯
5. ç»“åˆå¤šä¸ªä¿¡æºåšæŠ•èµ„å†³ç­–

### 8.3.2 é£é™©ç®¡ç†å»ºè®®

**åˆ†æ•£æŠ•èµ„ç»„åˆ**
- ä¸è¦å°†æ‰€æœ‰èµ„é‡‘æŠ•å…¥å•ä¸€æ”¶ç›Šæ± 
- åœ¨ä¸åŒé£é™©ç­‰çº§é—´åˆç†åˆ†é…
- è€ƒè™‘è·¨é“¾åˆ†æ•£ï¼Œé™ä½ç³»ç»Ÿæ€§é£é™©

**åŠ¨æ€è°ƒæ•´ç­–ç•¥**
- å®šæœŸæŸ¥çœ‹ç½‘ç«™æ›´æ–°ï¼Œå…³æ³¨é¡¹ç›®å˜åŒ–
- æ ¹æ®å¸‚åœºç¯å¢ƒè°ƒæ•´é£é™©åå¥½
- åˆ©ç”¨è¿‡æ»¤åŠŸèƒ½å¿«é€Ÿé‡æ–°ç­›é€‰é¡¹ç›®

**ä¿¡æ¯éªŒè¯**
- å¯¹æ¯”å¤šä¸ªä¿¡æ¯æº
- æŸ¥çœ‹é¡¹ç›®çš„å†å²è¡¨ç°è®°å½•
- å…³æ³¨ç¤¾åŒºè®¨è®ºå’Œç”¨æˆ·åé¦ˆ

---

**æ–‡æ¡£å®Œæˆæ—¥æœŸ**: 2025-01-23  
**æ–‡æ¡£çŠ¶æ€**: âœ… å®Œæ•´ç‰ˆæœ¬  
**é€‚ç”¨ç‰ˆæœ¬**: DeFiæ”¶ç›Šæ± èšåˆç³»ç»Ÿ v1.0.0